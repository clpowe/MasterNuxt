/*
 The buffer module from node.js, for the browser.

 @author   Feross Aboukhadijeh <https://feross.org>
 @license  MIT
 Determine if an object is a Buffer

 @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 @license  MIT
 http://mths.be/fromcodepoint v0.1.0 by @mathias */
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,q,n){c!=Array.prototype&&c!=Object.prototype&&(c[q]=n.value)};$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(c,q,n,k){if(q){n=$jscomp.global;c=c.split(".");for(k=0;k<c.length-1;k++){var b=c[k];b in n||(n[b]={});n=n[b]}c=c[c.length-1];k=n[c];q=q(k);q!=k&&null!=q&&$jscomp.defineProperty(n,c,{configurable:!0,writable:!0,value:q})}};$jscomp.polyfill("Array.prototype.fill",function(c){return c?c:function(c,n,k){var b=this.length||0;0>n&&(n=Math.max(0,b+n));if(null==k||k>b)k=b;k=Number(k);0>k&&(k=Math.max(0,b+k));for(n=Number(n||0);n<k;n++)this[n]=c;return this}},"es6","es3");
$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var c=0;return function(q){return $jscomp.SYMBOL_PREFIX+(q||"")+c++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.iterator;c||(c=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[c]&&$jscomp.defineProperty(Array.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.asyncIterator;c||(c=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.arrayIterator=function(c){var q=0;return $jscomp.iteratorPrototype(function(){return q<c.length?{done:!1,value:c[q++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(c){$jscomp.initSymbolIterator();c={next:c};c[$jscomp.global.Symbol.iterator]=function(){return this};return c};$jscomp.iteratorFromArray=function(c,q){$jscomp.initSymbolIterator();c instanceof String&&(c+="");var n=0,k={next:function(){if(n<c.length){var b=n++;return{value:q(b,c[b]),done:!1}}k.next=function(){return{done:!0,value:void 0}};return k.next()}};k[Symbol.iterator]=function(){return k};return k};
$jscomp.polyfill("Array.prototype.keys",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(c){return c})}},"es6","es3");$jscomp.polyfill("Object.getOwnPropertySymbols",function(c){return c?c:function(){return[]}},"es6","es5");
$jscomp.polyfill("Reflect.ownKeys",function(c){return c?c:function(c){var n=[],k=Object.getOwnPropertyNames(c);c=Object.getOwnPropertySymbols(c);for(var b=0;b<k.length;b++)("jscomp_symbol_"==k[b].substring(0,14)?c:n).push(k[b]);return n.concat(c)}},"es6","es5");
$jscomp.polyfill("String.fromCodePoint",function(c){return c?c:function(c){for(var n="",k=0;k<arguments.length;k++){var b=Number(arguments[k]);if(0>b||1114111<b||b!==Math.floor(b))throw new RangeError("invalid_code_point "+b);65535>=b?n+=String.fromCharCode(b):(b-=65536,n+=String.fromCharCode(b>>>10&1023|55296),n+=String.fromCharCode(b&1023|56320))}return n}},"es6","es3");$jscomp.polyfill("Math.sign",function(c){return c?c:function(c){c=Number(c);return 0===c||isNaN(c)?c:0<c?1:-1}},"es6","es3");
(function(c){"object"===typeof exports&&"undefined"!==typeof module?module.exports=c():"function"===typeof define&&define.amd?define([],c):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).imsc=c()})(function(){return function(){function c(q,n,k){function b(p,t){if(!n[p]){if(!q[p]){var a="function"==typeof require&&require;if(!t&&a)return a(p,!0);if(m)return m(p,!0);t=Error("Cannot find module '"+p+"'");throw t.code="MODULE_NOT_FOUND",t;}t=
n[p]={exports:{}};q[p][0].call(t.exports,function(a){return b(q[p][1][a]||a)},t,t.exports,c,q,n,k)}return n[p].exports}for(var m="function"==typeof require&&require,p=0;p<k.length;p++)b(k[p]);return b}return c}()({1:[function(c,q,n){function k(b){var a=b.length;if(0<a%4)throw Error("Invalid string. Length must be a multiple of 4");b=b.indexOf("=");-1===b&&(b=a);return[b,b===a?0:4-b%4]}function b(b,a,l){for(var v=[],c=a;c<l;c+=3)a=(b[c]<<16&16711680)+(b[c+1]<<8&65280)+(b[c+2]&255),v.push(m[a>>18&63]+
m[a>>12&63]+m[a>>6&63]+m[a&63]);return v.join("")}n.byteLength=function(b){b=k(b);var a=b[1];return 3*(b[0]+a)/4-a};n.toByteArray=function(b){var a=k(b);var l=a[0];a=a[1];for(var m=new y(3*(l+a)/4-a),c=0,t=0<a?l-4:l,u=0;u<t;u+=4)l=p[b.charCodeAt(u)]<<18|p[b.charCodeAt(u+1)]<<12|p[b.charCodeAt(u+2)]<<6|p[b.charCodeAt(u+3)],m[c++]=l>>16&255,m[c++]=l>>8&255,m[c++]=l&255;2===a&&(l=p[b.charCodeAt(u)]<<2|p[b.charCodeAt(u+1)]>>4,m[c++]=l&255);1===a&&(l=p[b.charCodeAt(u)]<<10|p[b.charCodeAt(u+1)]<<4|p[b.charCodeAt(u+
2)]>>2,m[c++]=l>>8&255,m[c++]=l&255);return m};n.fromByteArray=function(c){for(var a=c.length,l=a%3,v=[],k=0,t=a-l;k<t;k+=16383)v.push(b(c,k,k+16383>t?t:k+16383));1===l?(c=c[a-1],v.push(m[c>>2]+m[c<<4&63]+"==")):2===l&&(c=(c[a-2]<<8)+c[a-1],v.push(m[c>>10]+m[c>>4&63]+m[c<<2&63]+"="));return v.join("")};var m=[],p=[],y="undefined"!==typeof Uint8Array?Uint8Array:Array;for(c=0;64>c;++c)m[c]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[c],p["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(c)]=
c;p[45]=62;p[95]=63},{}],2:[function(c,q,n){},{}],3:[function(c,q,n){function k(a){if(!a)return"utf8";for(var b;;)switch(a){case "utf8":case "utf-8":return"utf8";case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return"utf16le";case "latin1":case "binary":return"latin1";case "base64":case "ascii":case "hex":return a;default:if(b)return;a=(""+a).toLowerCase();b=!0}}function b(b){var c=k(b);if("string"!==typeof c&&(u.isEncoding===D||!D(b)))throw Error("Unknown encoding: "+b);this.encoding=c||
b;switch(this.encoding){case "utf16le":this.text=t;this.end=a;b=4;break;case "utf8":this.fillLast=y;b=4;break;case "base64":this.text=l;this.end=v;b=3;break;default:this.write=z;this.end=B;return}this.lastTotal=this.lastNeed=0;this.lastChar=u.allocUnsafe(b)}function m(a){return 127>=a?0:6===a>>5?2:14===a>>4?3:30===a>>3?4:2===a>>6?-1:-2}function p(a,b,d){var f=b.length-1;if(f<d)return 0;var g=m(b[f]);if(0<=g)return 0<g&&(a.lastNeed=g-1),g;if(--f<d||-2===g)return 0;g=m(b[f]);if(0<=g)return 0<g&&(a.lastNeed=
g-2),g;if(--f<d||-2===g)return 0;g=m(b[f]);return 0<=g?(0<g&&(2===g?g=0:a.lastNeed=g-3),g):0}function y(a){var b=this.lastTotal-this.lastNeed;a:if(128!==(a[0]&192)){this.lastNeed=0;var d="\ufffd"}else{if(1<this.lastNeed&&1<a.length){if(128!==(a[1]&192)){this.lastNeed=1;d="\ufffd";break a}if(2<this.lastNeed&&2<a.length&&128!==(a[2]&192)){this.lastNeed=2;d="\ufffd";break a}}d=void 0}if(void 0!==d)return d;if(this.lastNeed<=a.length)return a.copy(this.lastChar,b,0,this.lastNeed),this.lastChar.toString(this.encoding,
0,this.lastTotal);a.copy(this.lastChar,b,0,a.length);this.lastNeed-=a.length}function t(a,b){if(0===(a.length-b)%2){if(b=a.toString("utf16le",b)){var d=b.charCodeAt(b.length-1);if(55296<=d&&56319>=d)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1],b.slice(0,-1)}return b}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=a[a.length-1];return a.toString("utf16le",b,a.length-1)}function a(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+this.lastChar.toString("utf16le",
0,this.lastTotal-this.lastNeed):a}function l(a,b){var d=(a.length-b)%3;if(0===d)return a.toString("base64",b);this.lastNeed=3-d;this.lastTotal=3;1===d?this.lastChar[0]=a[a.length-1]:(this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1]);return a.toString("base64",b,a.length-d)}function v(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+this.lastChar.toString("base64",0,3-this.lastNeed):a}function z(a){return a.toString(this.encoding)}function B(a){return a&&a.length?this.write(a):
""}var u=c("safe-buffer").Buffer,D=u.isEncoding||function(a){a=""+a;switch(a&&a.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};n.StringDecoder=b;b.prototype.write=function(a){if(0===a.length)return"";if(this.lastNeed){var b=this.fillLast(a);if(void 0===b)return"";var d=this.lastNeed;this.lastNeed=0}else d=0;return d<a.length?b?b+this.text(a,d):this.text(a,d):
b||""};b.prototype.end=function(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+"\ufffd":a};b.prototype.text=function(a,b){var d=p(this,a,b);if(!this.lastNeed)return a.toString("utf8",b);this.lastTotal=d;d=a.length-(d-this.lastNeed);a.copy(this.lastChar,0,d);return a.toString("utf8",b,d)};b.prototype.fillLast=function(a){if(this.lastNeed<=a.length)return a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,
this.lastTotal-this.lastNeed,0,a.length);this.lastNeed-=a.length}},{"safe-buffer":25}],4:[function(c,q,n){(function(k){var b=c("buffer"),m=b.Buffer,p=b.SlowBuffer,y=b.kMaxLength||2147483647;n.alloc=function(b,a,l){if("function"===typeof m.alloc)return m.alloc(b,a,l);if("number"===typeof l)throw new TypeError("encoding must not be number");if("number"!==typeof b)throw new TypeError("size must be a number");if(b>y)throw new RangeError("size is too large");var c=a;void 0===c&&(l=void 0,c=0);a=new m(b);
if("string"===typeof c){l=new m(c,l);c=l.length;for(var k=-1;++k<b;)a[k]=l[k%c]}else a.fill(c);return a};n.allocUnsafe=function(b){if("function"===typeof m.allocUnsafe)return m.allocUnsafe(b);if("number"!==typeof b)throw new TypeError("size must be a number");if(b>y)throw new RangeError("size is too large");return new m(b)};n.from=function(b,a,c){if("function"===typeof m.from&&(!k.Uint8Array||Uint8Array.from!==m.from))return m.from(b,a,c);if("number"===typeof b)throw new TypeError('"value" argument must not be a number');
if("string"===typeof b)return new m(b,a);if("undefined"!==typeof ArrayBuffer&&b instanceof ArrayBuffer){var l=a;if(1===arguments.length)return new m(b);"undefined"===typeof l&&(l=0);var z=c;"undefined"===typeof z&&(z=b.byteLength-l);if(l>=b.byteLength)throw new RangeError("'offset' is out of bounds");if(z>b.byteLength-l)throw new RangeError("'length' is out of bounds");return new m(b.slice(l,l+z))}if(m.isBuffer(b))return l=new m(b.length),b.copy(l,0,0,b.length),l;if(b){if(Array.isArray(b)||"undefined"!==
typeof ArrayBuffer&&b.buffer instanceof ArrayBuffer||"length"in b)return new m(b);if("Buffer"===b.type&&Array.isArray(b.data))return new m(b.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");};n.allocUnsafeSlow=function(b){if("function"===typeof m.allocUnsafeSlow)return m.allocUnsafeSlow(b);if("number"!==typeof b)throw new TypeError("size must be a number");if(b>=y)throw new RangeError("size is too large");return new p(b)}}).call(this,
"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{buffer:5}],5:[function(c,q,n){function k(h){if(h>C)throw new RangeError('The value "'+h+'" is invalid for option "size"');h=new Uint8Array(h);h.__proto__=b.prototype;return h}function b(h,e,a){if("number"===typeof h){if("string"===typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return y(h)}return m(h,e,a)}function m(h,e,d){if("string"===typeof h){var F=
e;if("string"!==typeof F||""===F)F="utf8";if(!b.isEncoding(F))throw new TypeError("Unknown encoding: "+F);e=v(h,F)|0;d=k(e);h=d.write(h,F);h!==e&&(d=d.slice(0,h));return d}if(ArrayBuffer.isView(h))return t(h);if(null==h)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h);if(M(h,ArrayBuffer)||h&&M(h.buffer,ArrayBuffer)){if(0>e||h.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(h.byteLength<
e+(d||0))throw new RangeError('"length" is outside of buffer bounds');h=void 0===e&&void 0===d?new Uint8Array(h):void 0===d?new Uint8Array(h,e):new Uint8Array(h,e,d);h.__proto__=b.prototype;return h}if("number"===typeof h)throw new TypeError('The "value" argument must not be of type number. Received type number');F=h.valueOf&&h.valueOf();if(null!=F&&F!==h)return b.from(F,e,d);if(F=a(h))return F;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof h[Symbol.toPrimitive])return b.from(h[Symbol.toPrimitive]("string"),
e,d);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h);}function p(h){if("number"!==typeof h)throw new TypeError('"size" argument must be of type number');if(0>h)throw new RangeError('The value "'+h+'" is invalid for option "size"');}function y(h){p(h);return k(0>h?0:l(h)|0)}function t(h){for(var e=0>h.length?0:l(h.length)|0,a=k(e),b=0;b<e;b+=1)a[b]=h[b]&255;return a}function a(h){if(b.isBuffer(h)){var e=
l(h.length)|0,a=k(e);if(0===a.length)return a;h.copy(a,0,0,e);return a}if(void 0!==h.length)return(e="number"!==typeof h.length)||(e=h.length,e=e!==e),e?k(0):t(h);if("Buffer"===h.type&&Array.isArray(h.data))return t(h.data)}function l(h){if(h>=C)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+C.toString(16)+" bytes");return h|0}function v(h,e){if(b.isBuffer(h))return h.length;if(ArrayBuffer.isView(h)||M(h,ArrayBuffer))return h.byteLength;if("string"!==typeof h)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+
typeof h);var a=h.length,d=2<arguments.length&&!0===arguments[2];if(!d&&0===a)return 0;for(var f=!1;;)switch(e){case "ascii":case "latin1":case "binary":return a;case "utf8":case "utf-8":return x(h).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*a;case "hex":return a>>>1;case "base64":return G.toByteArray(K(h)).length;default:if(f)return d?-1:x(h).length;e=(""+e).toLowerCase();f=!0}}function z(h,e,a){var b=!1;if(void 0===e||0>e)e=0;if(e>this.length)return"";if(void 0===a||
a>this.length)a=this.length;if(0>=a)return"";a>>>=0;e>>>=0;if(a<=e)return"";for(h||(h="utf8");;)switch(h){case "hex":h=e;e=a;a=this.length;if(!h||0>h)h=0;if(!e||0>e||e>a)e=a;b="";for(a=h;a<e;++a)h=b,b=this[a],b=16>b?"0"+b.toString(16):b.toString(16),b=h+b;return b;case "utf8":case "utf-8":return H(this,e,a);case "ascii":h="";for(a=Math.min(this.length,a);e<a;++e)h+=String.fromCharCode(this[e]&127);return h;case "latin1":case "binary":h="";for(a=Math.min(this.length,a);e<a;++e)h+=String.fromCharCode(this[e]);
return h;case "base64":return e=0===e&&a===this.length?G.fromByteArray(this):G.fromByteArray(this.slice(e,a)),e;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":e=this.slice(e,a);a="";for(h=0;h<e.length;h+=2)a+=String.fromCharCode(e[h]+256*e[h+1]);return a;default:if(b)throw new TypeError("Unknown encoding: "+h);h=(h+"").toLowerCase();b=!0}}function B(h,e,a){var b=h[e];h[e]=h[a];h[a]=b}function u(h,e,a,d,f){if(0===h.length)return-1;"string"===typeof a?(d=a,a=0):2147483647<a?a=2147483647:-2147483648>
a&&(a=-2147483648);a=+a;a!==a&&(a=f?0:h.length-1);0>a&&(a=h.length+a);if(a>=h.length){if(f)return-1;a=h.length-1}else if(0>a)if(f)a=0;else return-1;"string"===typeof e&&(e=b.from(e,d));if(b.isBuffer(e))return 0===e.length?-1:D(h,e,a,d,f);if("number"===typeof e)return e&=255,"function"===typeof Uint8Array.prototype.indexOf?f?Uint8Array.prototype.indexOf.call(h,e,a):Uint8Array.prototype.lastIndexOf.call(h,e,a):D(h,[e],a,d,f);throw new TypeError("val must be string, number or Buffer");}function D(h,
e,a,b,d){function f(h,e){return 1===F?h[e]:h.readUInt16BE(e*F)}var F=1,g=h.length,x=e.length;if(void 0!==b&&(b=String(b).toLowerCase(),"ucs2"===b||"ucs-2"===b||"utf16le"===b||"utf-16le"===b)){if(2>h.length||2>e.length)return-1;F=2;g/=2;x/=2;a/=2}if(d)for(b=-1;a<g;a++)if(f(h,a)===f(e,-1===b?0:a-b)){if(-1===b&&(b=a),a-b+1===x)return b*F}else-1!==b&&(a-=a-b),b=-1;else for(a+x>g&&(a=g-x);0<=a;a--){g=!0;for(b=0;b<x;b++)if(f(h,a+b)!==f(e,b)){g=!1;break}if(g)return a}return-1}function H(h,e,a){a=Math.min(h.length,
a);for(var b=[];e<a;){var d=h[e],f=null,F=239<d?4:223<d?3:191<d?2:1;if(e+F<=a)switch(F){case 1:128>d&&(f=d);break;case 2:var g=h[e+1];128===(g&192)&&(d=(d&31)<<6|g&63,127<d&&(f=d));break;case 3:g=h[e+1];var x=h[e+2];128===(g&192)&&128===(x&192)&&(d=(d&15)<<12|(g&63)<<6|x&63,2047<d&&(55296>d||57343<d)&&(f=d));break;case 4:g=h[e+1];x=h[e+2];var c=h[e+3];128===(g&192)&&128===(x&192)&&128===(c&192)&&(d=(d&15)<<18|(g&63)<<12|(x&63)<<6|c&63,65535<d&&1114112>d&&(f=d))}null===f?(f=65533,F=1):65535<f&&(f-=
65536,b.push(f>>>10&1023|55296),f=56320|f&1023);b.push(f);e+=F}h=b.length;if(h<=E)b=String.fromCharCode.apply(String,b);else{a="";for(e=0;e<h;)a+=String.fromCharCode.apply(String,b.slice(e,e+=E));b=a}return b}function A(h,e,a){if(0!==h%1||0>h)throw new RangeError("offset is not uint");if(h+e>a)throw new RangeError("Trying to access beyond buffer length");}function d(h,e,a,d,f,g){if(!b.isBuffer(h))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>f||e<g)throw new RangeError('"value" argument is out of bounds');
if(a+d>h.length)throw new RangeError("Index out of range");}function f(h,e,a,b,d,f){if(a+b>h.length)throw new RangeError("Index out of range");if(0>a)throw new RangeError("Index out of range");}function g(h,e,a,b,d){e=+e;a>>>=0;d||f(h,e,a,4,3.4028234663852886E38,-3.4028234663852886E38);L.write(h,e,a,b,23,4);return a+4}function w(h,e,a,b,d){e=+e;a>>>=0;d||f(h,e,a,8,1.7976931348623157E308,-1.7976931348623157E308);L.write(h,e,a,b,52,8);return a+8}function K(h){h=h.split("=")[0];h=h.trim().replace(Q,
"");if(2>h.length)return"";for(;0!==h.length%4;)h+="=";return h}function x(h,e){e=e||Infinity;for(var a,b=h.length,d=null,f=[],g=0;g<b;++g){a=h.charCodeAt(g);if(55295<a&&57344>a){if(!d){if(56319<a){-1<(e-=3)&&f.push(239,191,189);continue}else if(g+1===b){-1<(e-=3)&&f.push(239,191,189);continue}d=a;continue}if(56320>a){-1<(e-=3)&&f.push(239,191,189);d=a;continue}a=(d-55296<<10|a-56320)+65536}else d&&-1<(e-=3)&&f.push(239,191,189);d=null;if(128>a){if(0>--e)break;f.push(a)}else if(2048>a){if(0>(e-=2))break;
f.push(a>>6|192,a&63|128)}else if(65536>a){if(0>(e-=3))break;f.push(a>>12|224,a>>6&63|128,a&63|128)}else if(1114112>a){if(0>(e-=4))break;f.push(a>>18|240,a>>12&63|128,a>>6&63|128,a&63|128)}else throw Error("Invalid code point");}return f}function N(h){for(var a=[],b=0;b<h.length;++b)a.push(h.charCodeAt(b)&255);return a}function J(h,a,b,d){for(var e=0;e<d&&!(e+b>=a.length||e>=h.length);++e)a[e+b]=h[e];return e}function M(h,a){return h instanceof a||null!=h&&null!=h.constructor&&null!=h.constructor.name&&
h.constructor.name===a.name}var G=c("base64-js"),L=c("ieee754");n.Buffer=b;n.SlowBuffer=function(h){+h!=h&&(h=0);return b.alloc(+h)};n.INSPECT_MAX_BYTES=50;var C=2147483647;n.kMaxLength=C;b.TYPED_ARRAY_SUPPORT=function(){try{var h=new Uint8Array(1);h.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return 42===h.foo()}catch(e){return!1}}();b.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");
Object.defineProperty(b.prototype,"parent",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.buffer}});Object.defineProperty(b.prototype,"offset",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.byteOffset}});"undefined"!==typeof Symbol&&null!=Symbol.species&&b[Symbol.species]===b&&Object.defineProperty(b,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1});b.poolSize=8192;b.from=function(h,a,b){return m(h,a,b)};b.prototype.__proto__=Uint8Array.prototype;
b.__proto__=Uint8Array;b.alloc=function(h,a,b){p(h);h=0>=h?k(h):void 0!==a?"string"===typeof b?k(h).fill(a,b):k(h).fill(a):k(h);return h};b.allocUnsafe=function(h){return y(h)};b.allocUnsafeSlow=function(h){return y(h)};b.isBuffer=function(h){return null!=h&&!0===h._isBuffer&&h!==b.prototype};b.compare=function(h,a){M(h,Uint8Array)&&(h=b.from(h,h.offset,h.byteLength));M(a,Uint8Array)&&(a=b.from(a,a.offset,a.byteLength));if(!b.isBuffer(h)||!b.isBuffer(a))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');
if(h===a)return 0;for(var e=h.length,d=a.length,f=0,g=Math.min(e,d);f<g;++f)if(h[f]!==a[f]){e=h[f];d=a[f];break}return e<d?-1:d<e?1:0};b.isEncoding=function(h){switch(String(h).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};b.concat=function(h,a){if(!Array.isArray(h))throw new TypeError('"list" argument must be an Array of Buffers');if(0===h.length)return b.alloc(0);
var e;if(void 0===a)for(e=a=0;e<h.length;++e)a+=h[e].length;a=b.allocUnsafe(a);var d=0;for(e=0;e<h.length;++e){var f=h[e];M(f,Uint8Array)&&(f=b.from(f));if(!b.isBuffer(f))throw new TypeError('"list" argument must be an Array of Buffers');f.copy(a,d);d+=f.length}return a};b.byteLength=v;b.prototype._isBuffer=!0;b.prototype.swap16=function(){var h=this.length;if(0!==h%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var a=0;a<h;a+=2)B(this,a,a+1);return this};b.prototype.swap32=
function(){var h=this.length;if(0!==h%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var a=0;a<h;a+=4)B(this,a,a+3),B(this,a+1,a+2);return this};b.prototype.swap64=function(){var h=this.length;if(0!==h%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var a=0;a<h;a+=8)B(this,a,a+7),B(this,a+1,a+6),B(this,a+2,a+5),B(this,a+3,a+4);return this};b.prototype.toString=function(){var h=this.length;return 0===h?"":0===arguments.length?H(this,0,h):z.apply(this,
arguments)};b.prototype.toLocaleString=b.prototype.toString;b.prototype.equals=function(h){if(!b.isBuffer(h))throw new TypeError("Argument must be a Buffer");return this===h?!0:0===b.compare(this,h)};b.prototype.inspect=function(){var h=n.INSPECT_MAX_BYTES;var a=this.toString("hex",0,h).replace(/(.{2})/g,"$1 ").trim();this.length>h&&(a+=" ... ");return"<Buffer "+a+">"};b.prototype.compare=function(h,a,d,f,g){M(h,Uint8Array)&&(h=b.from(h,h.offset,h.byteLength));if(!b.isBuffer(h))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+
typeof h);void 0===a&&(a=0);void 0===d&&(d=h?h.length:0);void 0===f&&(f=0);void 0===g&&(g=this.length);if(0>a||d>h.length||0>f||g>this.length)throw new RangeError("out of range index");if(f>=g&&a>=d)return 0;if(f>=g)return-1;if(a>=d)return 1;a>>>=0;d>>>=0;f>>>=0;g>>>=0;if(this===h)return 0;var e=g-f,x=d-a,c=Math.min(e,x);f=this.slice(f,g);h=h.slice(a,d);for(a=0;a<c;++a)if(f[a]!==h[a]){e=f[a];x=h[a];break}return e<x?-1:x<e?1:0};b.prototype.includes=function(h,a,b){return-1!==this.indexOf(h,a,b)};b.prototype.indexOf=
function(h,a,b){return u(this,h,a,b,!0)};b.prototype.lastIndexOf=function(a,e,b){return u(this,a,e,b,!1)};b.prototype.write=function(a,e,b,d){if(void 0===e)d="utf8",b=this.length,e=0;else if(void 0===b&&"string"===typeof e)d=e,b=this.length,e=0;else if(isFinite(e))e>>>=0,isFinite(b)?(b>>>=0,void 0===d&&(d="utf8")):(d=b,b=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var h=this.length-e;if(void 0===b||b>h)b=h;if(0<a.length&&(0>b||0>e)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");
d||(d="utf8");for(h=!1;;)switch(d){case "hex":a:{e=Number(e)||0;d=this.length-e;b?(b=Number(b),b>d&&(b=d)):b=d;d=a.length;b>d/2&&(b=d/2);for(d=0;d<b;++d){h=parseInt(a.substr(2*d,2),16);if(h!==h){a=d;break a}this[e+d]=h}a=d}return a;case "utf8":case "utf-8":return J(x(a,this.length-e),this,e,b);case "ascii":return J(N(a),this,e,b);case "latin1":case "binary":return J(N(a),this,e,b);case "base64":return J(G.toByteArray(K(a)),this,e,b);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":d=a;h=this.length-
e;for(var f=[],g=0;g<d.length&&!(0>(h-=2));++g){var c=d.charCodeAt(g);a=c>>8;c%=256;f.push(c);f.push(a)}return J(f,this,e,b);default:if(h)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase();h=!0}};b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var E=4096;b.prototype.slice=function(a,e){var h=this.length;a=~~a;e=void 0===e?h:~~e;0>a?(a+=h,0>a&&(a=0)):a>h&&(a=h);0>e?(e+=h,0>e&&(e=0)):e>h&&(e=h);e<a&&(e=a);a=this.subarray(a,e);a.__proto__=
b.prototype;return a};b.prototype.readUIntLE=function(a,e,b){a>>>=0;e>>>=0;b||A(a,e,this.length);b=this[a];for(var h=1,d=0;++d<e&&(h*=256);)b+=this[a+d]*h;return b};b.prototype.readUIntBE=function(a,e,b){a>>>=0;e>>>=0;b||A(a,e,this.length);b=this[a+--e];for(var h=1;0<e&&(h*=256);)b+=this[a+--e]*h;return b};b.prototype.readUInt8=function(a,e){a>>>=0;e||A(a,1,this.length);return this[a]};b.prototype.readUInt16LE=function(a,e){a>>>=0;e||A(a,2,this.length);return this[a]|this[a+1]<<8};b.prototype.readUInt16BE=
function(a,e){a>>>=0;e||A(a,2,this.length);return this[a]<<8|this[a+1]};b.prototype.readUInt32LE=function(a,e){a>>>=0;e||A(a,4,this.length);return(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]};b.prototype.readUInt32BE=function(a,e){a>>>=0;e||A(a,4,this.length);return 16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])};b.prototype.readIntLE=function(a,e,b){a>>>=0;e>>>=0;b||A(a,e,this.length);b=this[a];for(var h=1,d=0;++d<e&&(h*=256);)b+=this[a+d]*h;b>=128*h&&(b-=Math.pow(2,8*e));return b};
b.prototype.readIntBE=function(a,e,b){a>>>=0;e>>>=0;b||A(a,e,this.length);b=e;for(var h=1,d=this[a+--b];0<b&&(h*=256);)d+=this[a+--b]*h;d>=128*h&&(d-=Math.pow(2,8*e));return d};b.prototype.readInt8=function(a,e){a>>>=0;e||A(a,1,this.length);return this[a]&128?-1*(255-this[a]+1):this[a]};b.prototype.readInt16LE=function(a,e){a>>>=0;e||A(a,2,this.length);a=this[a]|this[a+1]<<8;return a&32768?a|4294901760:a};b.prototype.readInt16BE=function(a,e){a>>>=0;e||A(a,2,this.length);a=this[a+1]|this[a]<<8;return a&
32768?a|4294901760:a};b.prototype.readInt32LE=function(a,e){a>>>=0;e||A(a,4,this.length);return this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24};b.prototype.readInt32BE=function(a,e){a>>>=0;e||A(a,4,this.length);return this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]};b.prototype.readFloatLE=function(a,e){a>>>=0;e||A(a,4,this.length);return L.read(this,a,!0,23,4)};b.prototype.readFloatBE=function(a,e){a>>>=0;e||A(a,4,this.length);return L.read(this,a,!1,23,4)};b.prototype.readDoubleLE=function(a,
e){a>>>=0;e||A(a,8,this.length);return L.read(this,a,!0,52,8)};b.prototype.readDoubleBE=function(a,e){a>>>=0;e||A(a,8,this.length);return L.read(this,a,!1,52,8)};b.prototype.writeUIntLE=function(a,e,b,f){a=+a;e>>>=0;b>>>=0;f||d(this,a,e,b,Math.pow(2,8*b)-1,0);f=1;var h=0;for(this[e]=a&255;++h<b&&(f*=256);)this[e+h]=a/f&255;return e+b};b.prototype.writeUIntBE=function(a,b,f,g){a=+a;b>>>=0;f>>>=0;g||d(this,a,b,f,Math.pow(2,8*f)-1,0);g=f-1;var h=1;for(this[b+g]=a&255;0<=--g&&(h*=256);)this[b+g]=a/h&
255;return b+f};b.prototype.writeUInt8=function(a,b,f){a=+a;b>>>=0;f||d(this,a,b,1,255,0);this[b]=a&255;return b+1};b.prototype.writeUInt16LE=function(a,b,f){a=+a;b>>>=0;f||d(this,a,b,2,65535,0);this[b]=a&255;this[b+1]=a>>>8;return b+2};b.prototype.writeUInt16BE=function(a,b,f){a=+a;b>>>=0;f||d(this,a,b,2,65535,0);this[b]=a>>>8;this[b+1]=a&255;return b+2};b.prototype.writeUInt32LE=function(a,b,f){a=+a;b>>>=0;f||d(this,a,b,4,4294967295,0);this[b+3]=a>>>24;this[b+2]=a>>>16;this[b+1]=a>>>8;this[b]=a&
255;return b+4};b.prototype.writeUInt32BE=function(a,b,f){a=+a;b>>>=0;f||d(this,a,b,4,4294967295,0);this[b]=a>>>24;this[b+1]=a>>>16;this[b+2]=a>>>8;this[b+3]=a&255;return b+4};b.prototype.writeIntLE=function(a,b,f,g){a=+a;b>>>=0;g||(g=Math.pow(2,8*f-1),d(this,a,b,f,g-1,-g));g=0;var h=1,e=0;for(this[b]=a&255;++g<f&&(h*=256);)0>a&&0===e&&0!==this[b+g-1]&&(e=1),this[b+g]=(a/h>>0)-e&255;return b+f};b.prototype.writeIntBE=function(a,b,f,g){a=+a;b>>>=0;g||(g=Math.pow(2,8*f-1),d(this,a,b,f,g-1,-g));g=f-
1;var h=1,e=0;for(this[b+g]=a&255;0<=--g&&(h*=256);)0>a&&0===e&&0!==this[b+g+1]&&(e=1),this[b+g]=(a/h>>0)-e&255;return b+f};b.prototype.writeInt8=function(a,b,f){a=+a;b>>>=0;f||d(this,a,b,1,127,-128);0>a&&(a=255+a+1);this[b]=a&255;return b+1};b.prototype.writeInt16LE=function(a,b,f){a=+a;b>>>=0;f||d(this,a,b,2,32767,-32768);this[b]=a&255;this[b+1]=a>>>8;return b+2};b.prototype.writeInt16BE=function(a,b,f){a=+a;b>>>=0;f||d(this,a,b,2,32767,-32768);this[b]=a>>>8;this[b+1]=a&255;return b+2};b.prototype.writeInt32LE=
function(a,b,f){a=+a;b>>>=0;f||d(this,a,b,4,2147483647,-2147483648);this[b]=a&255;this[b+1]=a>>>8;this[b+2]=a>>>16;this[b+3]=a>>>24;return b+4};b.prototype.writeInt32BE=function(a,b,f){a=+a;b>>>=0;f||d(this,a,b,4,2147483647,-2147483648);0>a&&(a=4294967295+a+1);this[b]=a>>>24;this[b+1]=a>>>16;this[b+2]=a>>>8;this[b+3]=a&255;return b+4};b.prototype.writeFloatLE=function(a,b,d){return g(this,a,b,!0,d)};b.prototype.writeFloatBE=function(a,b,d){return g(this,a,b,!1,d)};b.prototype.writeDoubleLE=function(a,
b,d){return w(this,a,b,!0,d)};b.prototype.writeDoubleBE=function(a,b,d){return w(this,a,b,!1,d)};b.prototype.copy=function(a,d,f,g){if(!b.isBuffer(a))throw new TypeError("argument should be a Buffer");f||(f=0);g||0===g||(g=this.length);d>=a.length&&(d=a.length);d||(d=0);0<g&&g<f&&(g=f);if(g===f||0===a.length||0===this.length)return 0;if(0>d)throw new RangeError("targetStart out of bounds");if(0>f||f>=this.length)throw new RangeError("Index out of range");if(0>g)throw new RangeError("sourceEnd out of bounds");
g>this.length&&(g=this.length);a.length-d<g-f&&(g=a.length-d+f);var h=g-f;if(this===a&&"function"===typeof Uint8Array.prototype.copyWithin)this.copyWithin(d,f,g);else if(this===a&&f<d&&d<g)for(g=h-1;0<=g;--g)a[g+d]=this[g+f];else Uint8Array.prototype.set.call(a,this.subarray(f,g),d);return h};b.prototype.fill=function(a,d,f,g){if("string"===typeof a){"string"===typeof d?(g=d,d=0,f=this.length):"string"===typeof f&&(g=f,f=this.length);if(void 0!==g&&"string"!==typeof g)throw new TypeError("encoding must be a string");
if("string"===typeof g&&!b.isEncoding(g))throw new TypeError("Unknown encoding: "+g);if(1===a.length){var h=a.charCodeAt(0);if("utf8"===g&&128>h||"latin1"===g)a=h}}else"number"===typeof a&&(a&=255);if(0>d||this.length<d||this.length<f)throw new RangeError("Out of range index");if(f<=d)return this;d>>>=0;f=void 0===f?this.length:f>>>0;a||(a=0);if("number"===typeof a)for(g=d;g<f;++g)this[g]=a;else{h=b.isBuffer(a)?a:b.from(a,g);var e=h.length;if(0===e)throw new TypeError('The value "'+a+'" is invalid for argument "value"');
for(g=0;g<f-d;++g)this[g+d]=h[g%e]}return this};var Q=/[^+/0-9A-Za-z-_]/g},{"base64-js":1,ieee754:8}],6:[function(c,q,n){(function(c){n.isArray=function(b){return Array.isArray?Array.isArray(b):"[object Array]"===Object.prototype.toString.call(b)};n.isBoolean=function(b){return"boolean"===typeof b};n.isNull=function(b){return null===b};n.isNullOrUndefined=function(b){return null==b};n.isNumber=function(b){return"number"===typeof b};n.isString=function(b){return"string"===typeof b};n.isSymbol=function(b){return"symbol"===
typeof b};n.isUndefined=function(b){return void 0===b};n.isRegExp=function(b){return"[object RegExp]"===Object.prototype.toString.call(b)};n.isObject=function(b){return"object"===typeof b&&null!==b};n.isDate=function(b){return"[object Date]"===Object.prototype.toString.call(b)};n.isError=function(b){return"[object Error]"===Object.prototype.toString.call(b)||b instanceof Error};n.isFunction=function(b){return"function"===typeof b};n.isPrimitive=function(b){return null===b||"boolean"===typeof b||"number"===
typeof b||"string"===typeof b||"symbol"===typeof b||"undefined"===typeof b};n.isBuffer=c.isBuffer}).call(this,{isBuffer:c("../../is-buffer/index.js")})},{"../../is-buffer/index.js":10}],7:[function(c,q,n){function k(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=B(null),this._eventsCount=0);this._maxListeners=this._maxListeners||void 0}function b(a,b,g,c){var d;if("function"!==typeof g)throw new TypeError('"listener" argument must be a function');if(d=a._events){d.newListener&&
(a.emit("newListener",b,g.listener?g.listener:g),d=a._events);var f=d[b]}else d=a._events=B(null),a._eventsCount=0;f?("function"===typeof f?f=d[b]=c?[g,f]:[f,g]:c?f.unshift(g):f.push(g),f.warned||(g=void 0===a._maxListeners?k.defaultMaxListeners:a._maxListeners)&&0<g&&f.length>g&&(f.warned=!0,g=Error("Possible EventEmitter memory leak detected. "+f.length+' "'+String(b)+'" listeners added. Use emitter.setMaxListeners() to increase limit.'),g.name="MaxListenersExceededWarning",g.emitter=a,g.type=b,
g.count=f.length,"object"===typeof console&&console.warn&&console.warn("%s: %s",g.name,g.message))):(d[b]=g,++a._eventsCount);return a}function m(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);
default:for(var a=Array(arguments.length),b=0;b<a.length;++b)a[b]=arguments[b];this.listener.apply(this.target,a)}}function p(a,b,g){a={fired:!1,wrapFn:void 0,target:a,type:b,listener:g};b=D.call(m,a);b.listener=g;return a.wrapFn=b}function y(b,f,g){b=b._events;if(!b)return[];f=b[f];if(!f)return[];if("function"===typeof f)return g?[f.listener||f]:[f];if(g)for(g=Array(f.length),b=0;b<g.length;++b)g[b]=f[b].listener||f[b];else g=a(f,f.length);return g}function t(a){var b=this._events;if(b){a=b[a];if("function"===
typeof a)return 1;if(a)return a.length}return 0}function a(a,b){for(var d=Array(b),f=0;f<b;++f)d[f]=a[f];return d}function l(a){var b=function(){};b.prototype=a;return new b}function v(a){var b=[],d;for(d in a)Object.prototype.hasOwnProperty.call(a,d)&&b.push(d);return d}function z(a){var b=this;return function(){return b.apply(a,arguments)}}var B=Object.create||l,u=Object.keys||v,D=Function.prototype.bind||z;q.exports=k;k.EventEmitter=k;k.prototype._events=void 0;k.prototype._maxListeners=void 0;
var H=10;try{c={};Object.defineProperty&&Object.defineProperty(c,"x",{value:0});var A=0===c.x}catch(d){A=!1}A?Object.defineProperty(k,"defaultMaxListeners",{enumerable:!0,get:function(){return H},set:function(a){if("number"!==typeof a||0>a||a!==a)throw new TypeError('"defaultMaxListeners" must be a positive number');H=a}}):k.defaultMaxListeners=H;k.prototype.setMaxListeners=function(a){if("number"!==typeof a||0>a||isNaN(a))throw new TypeError('"n" argument must be a positive number');this._maxListeners=
a;return this};k.prototype.getMaxListeners=function(){return void 0===this._maxListeners?k.defaultMaxListeners:this._maxListeners};k.prototype.emit=function(b){var d,g,c;var l="error"===b;if(c=this._events)l=l&&null==c.error;else if(!l)return!1;if(l){1<arguments.length&&(d=arguments[1]);if(d instanceof Error)throw d;c=Error('Unhandled "error" event. ('+d+")");c.context=d;throw c;}d=c[b];if(!d)return!1;c="function"===typeof d;var x=arguments.length;switch(x){case 1:if(c)d.call(this);else for(c=d.length,
d=a(d,c),l=0;l<c;++l)d[l].call(this);break;case 2:l=arguments[1];if(c)d.call(this,l);else for(c=d.length,d=a(d,c),x=0;x<c;++x)d[x].call(this,l);break;case 3:l=arguments[1];x=arguments[2];if(c)d.call(this,l,x);else for(c=d.length,d=a(d,c),g=0;g<c;++g)d[g].call(this,l,x);break;case 4:l=arguments[1];x=arguments[2];g=arguments[3];if(c)d.call(this,l,x,g);else{c=d.length;d=a(d,c);for(var m=0;m<c;++m)d[m].call(this,l,x,g)}break;default:l=Array(x-1);for(g=1;g<x;g++)l[g-1]=arguments[g];if(c)d.apply(this,l);
else for(c=d.length,d=a(d,c),x=0;x<c;++x)d[x].apply(this,l)}return!0};k.prototype.addListener=function(a,f){return b(this,a,f,!1)};k.prototype.on=k.prototype.addListener;k.prototype.prependListener=function(a,f){return b(this,a,f,!0)};k.prototype.once=function(a,b){if("function"!==typeof b)throw new TypeError('"listener" argument must be a function');this.on(a,p(this,a,b));return this};k.prototype.prependOnceListener=function(a,b){if("function"!==typeof b)throw new TypeError('"listener" argument must be a function');
this.prependListener(a,p(this,a,b));return this};k.prototype.removeListener=function(a,b){var d;if("function"!==typeof b)throw new TypeError('"listener" argument must be a function');var f=this._events;if(!f)return this;var c=f[a];if(!c)return this;if(c===b||c.listener===b)0===--this._eventsCount?this._events=B(null):(delete f[a],f.removeListener&&this.emit("removeListener",a,c.listener||b));else if("function"!==typeof c){var l=-1;for(d=c.length-1;0<=d;d--)if(c[d]===b||c[d].listener===b){var m=c[d].listener;
l=d;break}if(0>l)return this;if(0===l)c.shift();else{d=l+1;for(var k=c.length;d<k;l+=1,d+=1)c[l]=c[d];c.pop()}1===c.length&&(f[a]=c[0]);f.removeListener&&this.emit("removeListener",a,m||b)}return this};k.prototype.removeAllListeners=function(a){var b=this._events;if(!b)return this;if(!b.removeListener)return 0===arguments.length?(this._events=B(null),this._eventsCount=0):b[a]&&(0===--this._eventsCount?this._events=B(null):delete b[a]),this;if(0===arguments.length){var d=u(b);for(b=0;b<d.length;++b){var c=
d[b];"removeListener"!==c&&this.removeAllListeners(c)}this.removeAllListeners("removeListener");this._events=B(null);this._eventsCount=0;return this}d=b[a];if("function"===typeof d)this.removeListener(a,d);else if(d)for(b=d.length-1;0<=b;b--)this.removeListener(a,d[b]);return this};k.prototype.listeners=function(a){return y(this,a,!0)};k.prototype.rawListeners=function(a){return y(this,a,!1)};k.listenerCount=function(a,b){return"function"===typeof a.listenerCount?a.listenerCount(b):t.call(a,b)};k.prototype.listenerCount=
t;k.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],8:[function(c,q,n){n.read=function(c,b,m,p,y){var k=8*y-p-1;var a=(1<<k)-1,l=a>>1,v=-7;y=m?y-1:0;var z=m?-1:1,n=c[b+y];y+=z;m=n&(1<<-v)-1;n>>=-v;for(v+=k;0<v;m=256*m+c[b+y],y+=z,v-=8);k=m&(1<<-v)-1;m>>=-v;for(v+=p;0<v;k=256*k+c[b+y],y+=z,v-=8);if(0===m)m=1-l;else{if(m===a)return k?NaN:Infinity*(n?-1:1);k+=Math.pow(2,p);m-=l}return(n?-1:1)*k*Math.pow(2,m-p)};n.write=function(c,b,m,p,y,t){var a,l=8*
t-y-1,k=(1<<l)-1,z=k>>1,n=23===y?Math.pow(2,-24)-Math.pow(2,-77):0;t=p?0:t-1;var u=p?1:-1,q=0>b||0===b&&0>1/b?1:0;b=Math.abs(b);isNaN(b)||Infinity===b?(b=isNaN(b)?1:0,p=k):(p=Math.floor(Math.log(b)/Math.LN2),1>b*(a=Math.pow(2,-p))&&(p--,a*=2),b=1<=p+z?b+n/a:b+n*Math.pow(2,1-z),2<=b*a&&(p++,a/=2),p+z>=k?(b=0,p=k):1<=p+z?(b=(b*a-1)*Math.pow(2,y),p+=z):(b=b*Math.pow(2,z-1)*Math.pow(2,y),p=0));for(;8<=y;c[m+t]=b&255,t+=u,b/=256,y-=8);p=p<<y|b;for(l+=y;0<l;c[m+t]=p&255,t+=u,p/=256,l-=8);c[m+t-u]|=128*
q}},{}],9:[function(c,q,n){q.exports="function"===typeof Object.create?function(c,b){c.super_=b;c.prototype=Object.create(b.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}})}:function(c,b){c.super_=b;var m=function(){};m.prototype=b.prototype;c.prototype=new m;c.prototype.constructor=c}},{}],10:[function(c,q,n){function k(b){return!!b.constructor&&"function"===typeof b.constructor.isBuffer&&b.constructor.isBuffer(b)}q.exports=function(b){return null!=b&&(k(b)||"function"===
typeof b.readFloatLE&&"function"===typeof b.slice&&k(b.slice(0,0))||!!b._isBuffer)}},{}],11:[function(c,q,n){var k={}.toString;q.exports=Array.isArray||function(b){return"[object Array]"==k.call(b)}},{}],12:[function(c,q,n){(function(c){function b(b,k,y,t){if("function"!==typeof b)throw new TypeError('"callback" argument must be a function');var a=arguments.length;switch(a){case 0:case 1:return c.nextTick(b);case 2:return c.nextTick(function(){b.call(null,k)});case 3:return c.nextTick(function(){b.call(null,
k,y)});case 4:return c.nextTick(function(){b.call(null,k,y,t)});default:var l=Array(a-1);for(a=0;a<l.length;)l[a++]=arguments[a];return c.nextTick(function(){b.apply(null,l)})}}!c.version||0===c.version.indexOf("v0.")||0===c.version.indexOf("v1.")&&0!==c.version.indexOf("v1.8.")?q.exports=b:q.exports=c.nextTick}).call(this,c("_process"))},{_process:13}],13:[function(c,q,n){function k(){throw Error("setTimeout has not been defined");}function b(){throw Error("clearTimeout has not been defined");}function m(a){if(v===
setTimeout)return setTimeout(a,0);if((v===k||!v)&&setTimeout)return v=setTimeout,setTimeout(a,0);try{return v(a,0)}catch(d){try{return v.call(null,a,0)}catch(f){return v.call(this,a,0)}}}function p(a){if(z===clearTimeout)return clearTimeout(a);if((z===b||!z)&&clearTimeout)return z=clearTimeout,clearTimeout(a);try{return z(a)}catch(d){try{return z.call(null,a)}catch(f){return z.call(this,a)}}}function y(){u&&D&&(u=!1,D.length?B=D.concat(B):H=-1,B.length&&t())}function t(){if(!u){var a=m(y);u=!0;for(var b=
B.length;b;){D=B;for(B=[];++H<b;)D&&D[H].run();H=-1;b=B.length}D=null;u=!1;p(a)}}function a(a,b){this.fun=a;this.array=b}function l(){}c=q.exports={};try{var v="function"===typeof setTimeout?setTimeout:k}catch(A){v=k}try{var z="function"===typeof clearTimeout?clearTimeout:b}catch(A){z=b}var B=[],u=!1,D,H=-1;c.nextTick=function(b){var d=Array(arguments.length-1);if(1<arguments.length)for(var f=1;f<arguments.length;f++)d[f-1]=arguments[f];B.push(new a(b,d));1!==B.length||u||m(t)};a.prototype.run=function(){this.fun.apply(null,
this.array)};c.title="browser";c.browser=!0;c.env={};c.argv=[];c.version="";c.versions={};c.on=l;c.addListener=l;c.once=l;c.off=l;c.removeListener=l;c.removeAllListeners=l;c.emit=l;c.prependListener=l;c.prependOnceListener=l;c.listeners=function(a){return[]};c.binding=function(a){throw Error("process.binding is not supported");};c.cwd=function(){return"/"};c.chdir=function(a){throw Error("process.chdir is not supported");};c.umask=function(){return 0}},{}],14:[function(c,q,n){q.exports=c("./lib/_stream_duplex.js")},
{"./lib/_stream_duplex.js":15}],15:[function(c,q,n){function k(a){if(!(this instanceof k))return new k(a);y.call(this,a);t.call(this,a);a&&!1===a.readable&&(this.readable=!1);a&&!1===a.writable&&(this.writable=!1);this.allowHalfOpen=!0;a&&!1===a.allowHalfOpen&&(this.allowHalfOpen=!1);this.once("end",b)}function b(){this.allowHalfOpen||this._writableState.ended||p(m,this)}function m(a){a.end()}n=Object.keys||function(a){var b=[],c;for(c in a)b.push(c);return b};q.exports=k;var p=c("process-nextick-args");
q=c("core-util-is");q.inherits=c("inherits");var y=c("./_stream_readable"),t=c("./_stream_writable");q.inherits(k,y);c=n(t.prototype);for(q=0;q<c.length;q++)n=c[q],k.prototype[n]||(k.prototype[n]=t.prototype[n])},{"./_stream_readable":17,"./_stream_writable":19,"core-util-is":6,inherits:9,"process-nextick-args":12}],16:[function(c,q,n){function k(c){if(!(this instanceof k))return new k(c);b.call(this,c)}q.exports=k;var b=c("./_stream_transform");q=c("core-util-is");q.inherits=c("inherits");q.inherits(k,
b);k.prototype._transform=function(b,c,k){k(null,b)}},{"./_stream_transform":18,"core-util-is":6,inherits:9}],17:[function(c,q,n){(function(k){function b(a,b,d){if("function"===typeof a.prependListener)return a.prependListener(b,d);if(a._events&&a._events[b])K(a._events[b])?a._events[b].unshift(d):a._events[b]=[d,a._events[b]];else a.on(b,d)}function m(a,b){x=x||c("./_stream_duplex");a=a||{};this.objectMode=!!a.objectMode;b instanceof x&&(this.objectMode=this.objectMode||!!a.readableObjectMode);b=
a.highWaterMark;var d=this.objectMode?16:16384;this.highWaterMark=b||0===b?b:d;this.highWaterMark=~~this.highWaterMark;this.buffer=new E;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1;this.defaultEncoding=a.defaultEncoding||"utf8";this.ranOut=!1;this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;a.encoding&&(Q||(Q=c("string_decoder/").StringDecoder),
this.decoder=new Q(a.encoding),this.encoding=a.encoding)}function p(a){x=x||c("./_stream_duplex");if(!(this instanceof p))return new p(a);this._readableState=new m(a,this);this.readable=!0;a&&"function"===typeof a.read&&(this._read=a.read);N.call(this)}function n(b,d,f,g,c){var h=f;var e=null;J.isBuffer(h)||"string"===typeof h||null===h||void 0===h||d.objectMode||(e=new TypeError("Invalid non-string/buffer chunk"));if(h=e)b.emit("error",h);else if(null===f)d.reading=!1,d.ended||(d.decoder&&(f=d.decoder.end())&&
f.length&&(d.buffer.push(f),d.length+=d.objectMode?1:f.length),d.ended=!0,a(b));else if(d.objectMode||f&&0<f.length)if(d.ended&&!c)b.emit("error",Error("stream.push() after EOF"));else if(d.endEmitted&&c)b.emit("error",Error("stream.unshift() after end event"));else{if(d.decoder&&!c&&!g){f=d.decoder.write(f);var l=!d.objectMode&&0===f.length}c||(d.reading=!1);l||(d.flowing&&0===d.length&&!d.sync?(b.emit("data",f),b.read(0)):(d.length+=d.objectMode?1:f.length,c?d.buffer.unshift(f):d.buffer.push(f),
d.needReadable&&a(b)));d.readingMore||(d.readingMore=!0,w(v,b,d))}else c||(d.reading=!1);return!d.ended&&(d.needReadable||d.length<d.highWaterMark||0===d.length)}function t(a,b){if(0>=a||0===b.length&&b.ended)return 0;if(b.objectMode)return 1;if(a!==a)return b.flowing&&b.length?b.buffer.head.data.length:b.length;if(a>b.highWaterMark){var d=a;8388608<=d?d=8388608:(d--,d|=d>>>1,d|=d>>>2,d|=d>>>4,d|=d>>>8,d|=d>>>16,d++);b.highWaterMark=d}return a<=b.length?a:b.ended?b.length:(b.needReadable=!0,0)}function a(a){var b=
a._readableState;b.needReadable=!1;b.emittedReadable||(C("emitReadable",b.flowing),b.emittedReadable=!0,b.sync?w(l,a):l(a))}function l(a){C("emit readable");a.emit("readable");D(a)}function v(a,b){for(var d=b.length;!b.reading&&!b.flowing&&!b.ended&&b.length<b.highWaterMark&&(C("maybeReadMore read 0"),a.read(0),d!==b.length);)d=b.length;b.readingMore=!1}function z(a){return function(){var b=a._readableState;C("pipeOnDrain",b.awaitDrain);b.awaitDrain&&b.awaitDrain--;0===b.awaitDrain&&a.listeners("data").length&&
(b.flowing=!0,D(a))}}function B(a){C("readable nexttick read 0");a.read(0)}function u(a,b){b.reading||(C("resume read 0"),a.read(0));b.resumeScheduled=!1;b.awaitDrain=0;a.emit("resume");D(a);b.flowing&&!b.reading&&a.read(0)}function D(a){var b=a._readableState;for(C("flow",b.flowing);b.flowing&&null!==a.read(););}function H(a,b){if(0===b.length)return null;if(b.objectMode)var d=b.buffer.shift();else if(!a||a>=b.length)d=b.decoder?b.buffer.join(""):1===b.buffer.length?b.buffer.head.data:b.buffer.concat(b.length),
b.buffer.clear();else{d=b.buffer;b=b.decoder;if(a<d.head.data.length)b=d.head.data.slice(0,a),d.head.data=d.head.data.slice(a);else{if(a===d.head.data.length)d=d.shift();else if(b){b=d.head;var h=1,f=b.data;for(a-=f.length;b=b.next;){var g=b.data,c=a>g.length?g.length:a;f=c===g.length?f+g:f+g.slice(0,a);a-=c;if(0===a){c===g.length?(++h,d.head=b.next?b.next:d.tail=null):(d.head=b,b.data=g.slice(c));break}++h}d.length-=h;d=f}else{b=M.allocUnsafe(a);h=d.head;f=1;h.data.copy(b);for(a-=h.data.length;h=
h.next;){g=h.data;c=a>g.length?g.length:a;g.copy(b,b.length-a,0,c);a-=c;if(0===a){c===g.length?(++f,d.head=h.next?h.next:d.tail=null):(d.head=h,h.data=g.slice(c));break}++f}d.length-=f;d=b}b=d}d=b}return d}function A(a){var b=a._readableState;if(0<b.length)throw Error('"endReadable()" called on non-empty stream');b.endEmitted||(b.ended=!0,w(d,b,a))}function d(a,b){a.endEmitted||0!==a.length||(a.endEmitted=!0,b.readable=!1,b.emit("end"))}function f(a,b){for(var d=0,h=a.length;d<h;d++)b(a[d],d)}function g(a,
b){for(var d=0,h=a.length;d<h;d++)if(a[d]===b)return d;return-1}q.exports=p;var w=c("process-nextick-args"),K=c("isarray"),x;p.ReadableState=m;c("events");try{var N=c("stream")}catch(h){}finally{N||(N=c("events").EventEmitter)}var J=c("buffer").Buffer,M=c("buffer-shims"),G=c("core-util-is");G.inherits=c("inherits");var L=c("util"),C=void 0;C=L&&L.debuglog?L.debuglog("stream"):function(){};var E=c("./internal/streams/BufferList"),Q;G.inherits(p,N);p.prototype.push=function(a,b){var d=this._readableState;
d.objectMode||"string"!==typeof a||(b=b||d.defaultEncoding,b!==d.encoding&&(a=M.from(a,b),b=""));return n(this,d,a,b,!1)};p.prototype.unshift=function(a){return n(this,this._readableState,a,"",!0)};p.prototype.isPaused=function(){return!1===this._readableState.flowing};p.prototype.setEncoding=function(a){Q||(Q=c("string_decoder/").StringDecoder);this._readableState.decoder=new Q(a);this._readableState.encoding=a;return this};p.prototype.read=function(b){C("read",b);b=parseInt(b,10);var d=this._readableState,
f=b;0!==b&&(d.emittedReadable=!1);if(0===b&&d.needReadable&&(d.length>=d.highWaterMark||d.ended))return C("read: emitReadable",d.length,d.ended),0===d.length&&d.ended?A(this):a(this),null;b=t(b,d);if(0===b&&d.ended)return 0===d.length&&A(this),null;var g=d.needReadable;C("need readable",g);if(0===d.length||d.length-b<d.highWaterMark)g=!0,C("length less than watermark",g);d.ended||d.reading?C("reading or ended",!1):g&&(C("do read"),d.reading=!0,d.sync=!0,0===d.length&&(d.needReadable=!0),this._read(d.highWaterMark),
d.sync=!1,d.reading||(b=t(f,d)));g=0<b?H(b,d):null;null===g?(d.needReadable=!0,b=0):d.length-=b;0===d.length&&(d.ended||(d.needReadable=!0),f!==b&&d.ended&&A(this));null!==g&&this.emit("data",g);return g};p.prototype._read=function(a){this.emit("error",Error("_read() is not implemented"))};p.prototype.pipe=function(a,d){function f(a){C("onunpipe");a===v&&h()}function c(){C("onend");a.end()}function h(){C("cleanup");a.removeListener("close",x);a.removeListener("finish",m);a.removeListener("drain",
p);a.removeListener("error",e);a.removeListener("unpipe",f);v.removeListener("end",c);v.removeListener("end",h);v.removeListener("data",l);W=!0;!I.awaitDrain||a._writableState&&!a._writableState.needDrain||p()}function l(b){C("ondata");X=!1;!1!==a.write(b)||X||((1===I.pipesCount&&I.pipes===a||1<I.pipesCount&&-1!==g(I.pipes,a))&&!W&&(C("false write response, pause",v._readableState.awaitDrain),v._readableState.awaitDrain++,X=!0),v.pause())}function e(b){C("onerror",b);O();a.removeListener("error",
e);0===a.listeners("error").length&&a.emit("error",b)}function x(){a.removeListener("finish",m);O()}function m(){C("onfinish");a.removeListener("close",x);O()}function O(){C("unpipe");v.unpipe(a)}var v=this,I=this._readableState;switch(I.pipesCount){case 0:I.pipes=a;break;case 1:I.pipes=[I.pipes,a];break;default:I.pipes.push(a)}I.pipesCount+=1;C("pipe count=%d opts=%j",I.pipesCount,d);d=d&&!1===d.end||a===k.stdout||a===k.stderr?h:c;if(I.endEmitted)w(d);else v.once("end",d);a.on("unpipe",f);var p=
z(v);a.on("drain",p);var W=!1,X=!1;v.on("data",l);b(a,"error",e);a.once("close",x);a.once("finish",m);a.emit("pipe",v);I.flowing||(C("pipe resume"),v.resume());return a};p.prototype.unpipe=function(a){var b=this._readableState;if(0===b.pipesCount)return this;if(1===b.pipesCount){if(a&&a!==b.pipes)return this;a||(a=b.pipes);b.pipes=null;b.pipesCount=0;b.flowing=!1;a&&a.emit("unpipe",this);return this}if(!a){a=b.pipes;var d=b.pipesCount;b.pipes=null;b.pipesCount=0;b.flowing=!1;for(b=0;b<d;b++)a[b].emit("unpipe",
this);return this}d=g(b.pipes,a);if(-1===d)return this;b.pipes.splice(d,1);--b.pipesCount;1===b.pipesCount&&(b.pipes=b.pipes[0]);a.emit("unpipe",this);return this};p.prototype.on=function(b,d){d=N.prototype.on.call(this,b,d);"data"===b?!1!==this._readableState.flowing&&this.resume():"readable"===b&&(b=this._readableState,b.endEmitted||b.readableListening||(b.readableListening=b.needReadable=!0,b.emittedReadable=!1,b.reading?b.length&&a(this,b):w(B,this)));return d};p.prototype.addListener=p.prototype.on;
p.prototype.resume=function(){var a=this._readableState;a.flowing||(C("resume"),a.flowing=!0,a.resumeScheduled||(a.resumeScheduled=!0,w(u,this,a)));return this};p.prototype.pause=function(){C("call pause flowing=%j",this._readableState.flowing);!1!==this._readableState.flowing&&(C("pause"),this._readableState.flowing=!1,this.emit("pause"));return this};p.prototype.wrap=function(a){var b=this._readableState,d=!1,g=this;a.on("end",function(){C("wrapped end");if(b.decoder&&!b.ended){var a=b.decoder.end();
a&&a.length&&g.push(a)}g.push(null)});a.on("data",function(f){C("wrapped data");b.decoder&&(f=b.decoder.write(f));b.objectMode&&(null===f||void 0===f)||!(b.objectMode||f&&f.length)||g.push(f)||(d=!0,a.pause())});for(var c in a)void 0===this[c]&&"function"===typeof a[c]&&(this[c]=function(b){return function(){return a[b].apply(a,arguments)}}(c));f(["error","close","destroy","pause","resume"],function(b){a.on(b,g.emit.bind(g,b))});g._read=function(b){C("wrapped _read",b);d&&(d=!1,a.resume())};return g};
p._fromList=H}).call(this,c("_process"))},{"./_stream_duplex":15,"./internal/streams/BufferList":20,_process:13,buffer:5,"buffer-shims":4,"core-util-is":6,events:7,inherits:9,isarray:11,"process-nextick-args":12,"string_decoder/":28,util:2}],18:[function(c,q,n){function k(b){this.afterTransform=function(c,a){var l=b._transformState;l.transforming=!1;var m=l.writecb;m?(l.writechunk=null,l.writecb=null,null!==a&&void 0!==a&&b.push(a),m(c),c=b._readableState,c.reading=!1,(c.needReadable||c.length<c.highWaterMark)&&
b._read(c.highWaterMark),c=void 0):c=b.emit("error",Error("no writecb in Transform class"));return c};this.transforming=this.needTransform=!1;this.writeencoding=this.writechunk=this.writecb=null}function b(c){if(!(this instanceof b))return new b(c);p.call(this,c);this._transformState=new k(this);var t=this;this._readableState.needReadable=!0;this._readableState.sync=!1;c&&("function"===typeof c.transform&&(this._transform=c.transform),"function"===typeof c.flush&&(this._flush=c.flush));this.once("prefinish",
function(){"function"===typeof this._flush?this._flush(function(a,b){m(t,a,b)}):m(t)})}function m(b,c,a){if(c)return b.emit("error",c);null!==a&&void 0!==a&&b.push(a);c=b._transformState;if(b._writableState.length)throw Error("Calling transform done when ws.length != 0");if(c.transforming)throw Error("Calling transform done when still transforming");return b.push(null)}q.exports=b;var p=c("./_stream_duplex");q=c("core-util-is");q.inherits=c("inherits");q.inherits(b,p);b.prototype.push=function(b,
c){this._transformState.needTransform=!1;return p.prototype.push.call(this,b,c)};b.prototype._transform=function(b,c,a){throw Error("_transform() is not implemented");};b.prototype._write=function(b,c,a){var l=this._transformState;l.writecb=a;l.writechunk=b;l.writeencoding=c;l.transforming||(b=this._readableState,(l.needTransform||b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark))};b.prototype._read=function(b){b=this._transformState;null!==b.writechunk&&b.writecb&&!b.transforming?
(b.transforming=!0,this._transform(b.writechunk,b.writeencoding,b.afterTransform)):b.needTransform=!0}},{"./_stream_duplex":15,"core-util-is":6,inherits:9}],19:[function(c,q,n){(function(k,b){function m(){}function p(a,b,d){this.chunk=a;this.encoding=b;this.callback=d;this.next=null}function n(a,b){A=A||c("./_stream_duplex");a=a||{};this.objectMode=!!a.objectMode;b instanceof A&&(this.objectMode=this.objectMode||!!a.writableObjectMode);var d=a.highWaterMark,f=this.objectMode?16:16384;this.highWaterMark=
d||0===d?d:f;this.highWaterMark=~~this.highWaterMark;this.finished=this.ended=this.ending=this.needDrain=!1;this.decodeStrings=!1!==a.decodeStrings;this.defaultEncoding=a.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(a){var d=b._writableState,f=d.sync,c=d.writecb;d.writing=!1;d.writecb=null;d.length-=d.writelen;d.writelen=0;a?(--d.pendingcb,f?D(c,a):c(a),b._writableState.errorEmitted=!0,b.emit("error",a)):((a=z(d))||
d.corked||d.bufferProcessing||!d.bufferedRequest||v(b,d),f?H(l,b,d,a,c):l(b,d,a,c))};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.bufferedRequestCount=0;this.corkedRequestsFree=new u(this)}function t(a){A=A||c("./_stream_duplex");if(!(K.call(t,this)||this instanceof A))return new t(a);this._writableState=new n(a,this);this.writable=!0;a&&("function"===typeof a.write&&(this._write=a.write),"function"===
typeof a.writev&&(this._writev=a.writev));f.call(this)}function a(a,b,d,f,c,g,l){b.writelen=f;b.writecb=l;b.writing=!0;b.sync=!0;d?a._writev(c,b.onwrite):a._write(c,g,b.onwrite);b.sync=!1}function l(a,b,d,f){!d&&0===b.length&&b.needDrain&&(b.needDrain=!1,a.emit("drain"));b.pendingcb--;f();B(a,b)}function v(b,d){d.bufferProcessing=!0;var f=d.bufferedRequest;if(b._writev&&f&&f.next){var c=Array(d.bufferedRequestCount),g=d.corkedRequestsFree;g.entry=f;for(var l=0;f;)c[l]=f,f=f.next,l+=1;a(b,d,!0,d.length,
c,"",g.finish);d.pendingcb++;d.lastBufferedRequest=null;g.next?(d.corkedRequestsFree=g.next,g.next=null):d.corkedRequestsFree=new u(d)}else{for(;f&&(c=f.chunk,a(b,d,!1,d.objectMode?1:c.length,c,f.encoding,f.callback),f=f.next,!d.writing););null===f&&(d.lastBufferedRequest=null)}d.bufferedRequestCount=0;d.bufferedRequest=f;d.bufferProcessing=!1}function z(a){return a.ending&&0===a.length&&null===a.bufferedRequest&&!a.finished&&!a.writing}function B(a,b){var d=z(b);d&&(0===b.pendingcb?(b.prefinished||
(b.prefinished=!0,a.emit("prefinish")),b.finished=!0,a.emit("finish")):b.prefinished||(b.prefinished=!0,a.emit("prefinish")));return d}function u(a){var b=this;this.entry=this.next=null;this.finish=function(d){var f=b.entry;for(b.entry=null;f;){var c=f.callback;a.pendingcb--;c(d);f=f.next}a.corkedRequestsFree?a.corkedRequestsFree.next=b:a.corkedRequestsFree=b}}q.exports=t;var D=c("process-nextick-args"),H=!k.browser&&-1<["v0.10","v0.9."].indexOf(k.version.slice(0,5))?b:D,A;t.WritableState=n;k=c("core-util-is");
k.inherits=c("inherits");var d={deprecate:c("util-deprecate")};try{var f=c("stream")}catch(x){}finally{f||(f=c("events").EventEmitter)}var g=c("buffer").Buffer,w=c("buffer-shims");k.inherits(t,f);n.prototype.getBuffer=function(){for(var a=this.bufferedRequest,b=[];a;)b.push(a),a=a.next;return b};(function(){try{Object.defineProperty(n.prototype,"buffer",{get:d.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(x){}})();
if("function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]){var K=Function.prototype[Symbol.hasInstance];Object.defineProperty(t,Symbol.hasInstance,{value:function(a){return K.call(this,a)?!0:a&&a._writableState instanceof n}})}else K=function(a){return a instanceof this};t.prototype.pipe=function(){this.emit("error",Error("Cannot pipe, not readable"))};t.prototype.write=function(b,d,f){var c=this._writableState,l=!1;"function"===typeof d&&(f=d,d=
null);g.isBuffer(b)?d="buffer":d||(d=c.defaultEncoding);"function"!==typeof f&&(f=m);if(c.ended)c=f,b=Error("write after end"),this.emit("error",b),D(c,b);else{var k=f,x=!0,v=!1;null===b?v=new TypeError("May not write null values to stream"):g.isBuffer(b)||"string"===typeof b||void 0===b||c.objectMode||(v=new TypeError("Invalid non-string/buffer chunk"));v&&(this.emit("error",v),D(k,v),x=!1);x&&(c.pendingcb++,l=d,c.objectMode||!1===c.decodeStrings||"string"!==typeof b||(b=w.from(b,l)),g.isBuffer(b)&&
(l="buffer"),k=c.objectMode?1:b.length,c.length+=k,d=c.length<c.highWaterMark,d||(c.needDrain=!0),c.writing||c.corked?(k=c.lastBufferedRequest,c.lastBufferedRequest=new p(b,l,f),k?k.next=c.lastBufferedRequest:c.bufferedRequest=c.lastBufferedRequest,c.bufferedRequestCount+=1):a(this,c,!1,k,b,l,f),l=d)}return l};t.prototype.cork=function(){this._writableState.corked++};t.prototype.uncork=function(){var a=this._writableState;a.corked&&(a.corked--,a.writing||a.corked||a.finished||a.bufferProcessing||
!a.bufferedRequest||v(this,a))};t.prototype.setDefaultEncoding=function(a){"string"===typeof a&&(a=a.toLowerCase());if(!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((a+"").toLowerCase())))throw new TypeError("Unknown encoding: "+a);this._writableState.defaultEncoding=a;return this};t.prototype._write=function(a,b,d){d(Error("_write() is not implemented"))};t.prototype._writev=null;t.prototype.end=function(a,b,d){var f=this._writableState;"function"===
typeof a?(d=a,b=a=null):"function"===typeof b&&(d=b,b=null);null!==a&&void 0!==a&&this.write(a,b);f.corked&&(f.corked=1,this.uncork());if(!f.ending&&!f.finished){a=d;f.ending=!0;B(this,f);if(a)if(f.finished)D(a);else this.once("finish",a);f.ended=!0;this.writable=!1}}}).call(this,c("_process"),c("timers").setImmediate)},{"./_stream_duplex":15,_process:13,buffer:5,"buffer-shims":4,"core-util-is":6,events:7,inherits:9,"process-nextick-args":12,timers:29,"util-deprecate":30}],20:[function(c,q,n){function k(){this.tail=
this.head=null;this.length=0}c("buffer");var b=c("buffer-shims");q.exports=k;k.prototype.push=function(b){b={data:b,next:null};0<this.length?this.tail.next=b:this.head=b;this.tail=b;++this.length};k.prototype.unshift=function(b){b={data:b,next:this.head};0===this.length&&(this.tail=b);this.head=b;++this.length};k.prototype.shift=function(){if(0!==this.length){var b=this.head.data;this.head=1===this.length?this.tail=null:this.head.next;--this.length;return b}};k.prototype.clear=function(){this.head=
this.tail=null;this.length=0};k.prototype.join=function(b){if(0===this.length)return"";for(var c=this.head,m=""+c.data;c=c.next;)m+=b+c.data;return m};k.prototype.concat=function(c){if(0===this.length)return b.alloc(0);if(1===this.length)return this.head.data;c=b.allocUnsafe(c>>>0);for(var m=this.head,k=0;m;)m.data.copy(c,k),k+=m.data.length,m=m.next;return c}},{buffer:5,"buffer-shims":4}],21:[function(c,q,n){q.exports=c("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":16}],22:[function(c,
q,n){var k=c("_process");a:{try{var b=c("stream");break a}catch(m){}b=void 0}n=q.exports=c("./lib/_stream_readable.js");n.Stream=b||n;n.Readable=n;n.Writable=c("./lib/_stream_writable.js");n.Duplex=c("./lib/_stream_duplex.js");n.Transform=c("./lib/_stream_transform.js");n.PassThrough=c("./lib/_stream_passthrough.js");!k.browser&&"disable"===k.env.READABLE_STREAM&&b&&(q.exports=b)},{"./lib/_stream_duplex.js":15,"./lib/_stream_passthrough.js":16,"./lib/_stream_readable.js":17,"./lib/_stream_transform.js":18,
"./lib/_stream_writable.js":19,_process:13}],23:[function(c,q,n){q.exports=c("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":18}],24:[function(c,q,n){q.exports=c("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":19}],25:[function(c,q,n){function k(b,c){for(var a in b)c[a]=b[a]}function b(b,c,a){return p(b,c,a)}var m=c("buffer"),p=m.Buffer;p.from&&p.alloc&&p.allocUnsafe&&p.allocUnsafeSlow?q.exports=m:(k(m,n),n.Buffer=b);k(p,b);b.from=function(b,c,a){if("number"===typeof b)throw new TypeError("Argument must not be a number");
return p(b,c,a)};b.alloc=function(b,c,a){if("number"!==typeof b)throw new TypeError("Argument must be a number");b=p(b);void 0!==c?"string"===typeof a?b.fill(c,a):b.fill(c):b.fill(0);return b};b.allocUnsafe=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");return p(b)};b.allocUnsafeSlow=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");return m.SlowBuffer(b)}},{buffer:5}],26:[function(c,q,n){(function(k){(function(b){function m(a,
d){if(!(this instanceof m))return new m(a,d);for(var c=0,f=K.length;c<f;c++)this[K[c]]="";this.q=this.c="";this.bufferCheckPosition=b.MAX_BUFFER_LENGTH;this.opt=d||{};this.opt.lowercase=this.opt.lowercase||this.opt.lowercasetags;this.looseCase=this.opt.lowercase?"toLowerCase":"toUpperCase";this.tags=[];this.closed=this.closedRoot=this.sawRoot=!1;this.tag=this.error=null;this.strict=!!a;this.noscript=!(!a&&!this.opt.noscript);this.state=r.BEGIN;this.ENTITIES=(this.strictEntities=this.opt.strictEntities)?
Object.create(b.XML_ENTITIES):Object.create(b.ENTITIES);this.attribList=[];this.opt.xmlns&&(this.ns=Object.create(F));if(this.trackPosition=!1!==this.opt.position)this.position=this.line=this.column=0;this.onready&&this.onready(void 0)}function p(a,b){if(!(this instanceof p))return new p(a,b);x.apply(this);this._parser=new m(a,b);this.readable=this.writable=!0;var d=this;this._parser.onend=function(){d.emit("end")};this._parser.onerror=function(a){d.emit("error",a);d._parser.error=null};this._decoder=
null;N.forEach(function(a){Object.defineProperty(d,"on"+a,{get:function(){return d._parser["on"+a]},set:function(b){if(!b)return d.removeAllListeners(a),d._parser["on"+a]=b;d.on(a,b)},enumerable:!0,configurable:!1})})}function n(a){return a.split("").reduce(function(a,b){a[b]=!0;return a},{})}function t(a,b){return"[object RegExp]"===Object.prototype.toString.call(a)?!!b.match(a):a[b]}function a(a,b,d){a.textNode&&l(a);a[b]&&a[b](d)}function l(a){a.textNode=v(a.opt,a.textNode);a.textNode&&a.ontext&&
a.ontext(a.textNode);a.textNode=""}function v(a,b){a.trim&&(b=b.trim());a.normalize&&(b=b.replace(/\s+/g," "));return b}function z(a,b){l(a);a.trackPosition&&(b+="\nLine: "+a.line+"\nColumn: "+a.column+"\nChar: "+a.c);b=Error(b);a.error=b;a.onerror&&a.onerror(b);return a}function B(a){a.sawRoot&&!a.closedRoot&&u(a,"Unclosed root tag");a.state!==r.BEGIN&&a.state!==r.BEGIN_WHITESPACE&&a.state!==r.TEXT&&z(a,"Unexpected end");l(a);a.c="";a.closed=!0;a.onend&&a.onend(void 0);m.call(a,a.strict,a.opt);return a}
function u(a,b){if("object"!==typeof a||!(a instanceof m))throw Error("bad call to strictFail");a.strict&&z(a,b)}function q(a,b){var d=0>a.indexOf(":")?["",a]:a.split(":"),c=d[0];d=d[1];b&&"xmlns"===a&&(c="xmlns",d="");return{prefix:c,local:d}}function H(b){b.strict||(b.attribName=b.attribName[b.looseCase]());if(-1===b.attribList.indexOf(b.attribName)&&!b.tag.attributes.hasOwnProperty(b.attribName))if(b.opt.xmlns){var d=q(b.attribName,!0),c=d.local;if("xmlns"===d.prefix)if("xml"===c&&b.attribValue!==
h)u(b,"xml: prefix must be bound to "+h+"\nActual: "+b.attribValue);else if("xmlns"===c&&b.attribValue!==e)u(b,"xmlns: prefix must be bound to "+e+"\nActual: "+b.attribValue);else{d=b.tag;var f=b.tags[b.tags.length-1]||b;d.ns===f.ns&&(d.ns=Object.create(f.ns));d.ns[c]=b.attribValue}b.attribList.push([b.attribName,b.attribValue])}else b.tag.attributes[b.attribName]=b.attribValue,a(b,"onattribute",{name:b.attribName,value:b.attribValue});b.attribName=b.attribValue=""}function A(b,d){if(b.opt.xmlns){var c=
b.tag,f=q(b.tagName);c.prefix=f.prefix;c.local=f.local;c.uri=c.ns[f.prefix]||"";c.prefix&&!c.uri&&(u(b,"Unbound namespace prefix: "+JSON.stringify(b.tagName)),c.uri=f.prefix);f=b.tags[b.tags.length-1]||b;c.ns&&f.ns!==c.ns&&Object.keys(c.ns).forEach(function(d){a(b,"onopennamespace",{prefix:d,uri:c.ns[d]})});f=0;for(var g=b.attribList.length;f<g;f++){var h=b.attribList[f],l=h[0],e=h[1],m=q(l,!0);h=m.prefix;var k=""===h?"":c.ns[h]||"";e={name:l,value:e,prefix:h,local:m.local,uri:k};h&&"xmlns"!==h&&
!k&&(u(b,"Unbound namespace prefix: "+JSON.stringify(h)),e.uri=h);b.tag.attributes[l]=e;a(b,"onattribute",e)}b.attribList.length=0}b.tag.isSelfClosing=!!d;b.sawRoot=!0;b.tags.push(b.tag);a(b,"onopentag",b.tag);d||(b.noscript||"script"!==b.tagName.toLowerCase()?b.state=r.TEXT:b.state=r.SCRIPT,b.tag=null,b.tagName="");b.attribName=b.attribValue="";b.attribList.length=0}function d(b){if(b.tagName){if(b.script){if("script"!==b.tagName){b.script+="</"+b.tagName+">";b.tagName="";b.state=r.SCRIPT;return}a(b,
"onscript",b.script);b.script=""}var d=b.tags.length,c=b.tagName;b.strict||(c=c[b.looseCase]());for(var f=c;d--;)if(b.tags[d].name!==f)u(b,"Unexpected close tag");else break;if(0>d)u(b,"Unmatched closing tag: "+b.tagName),b.textNode+="</"+b.tagName+">";else{b.tagName=c;for(c=b.tags.length;c-- >d;){var g=b.tag=b.tags.pop();b.tagName=b.tag.name;a(b,"onclosetag",b.tagName);for(var h in g.ns);f=b.tags[b.tags.length-1]||b;b.opt.xmlns&&g.ns!==f.ns&&Object.keys(g.ns).forEach(function(d){a(b,"onclosenamespace",
{prefix:d,uri:g.ns[d]})})}0===d&&(b.closedRoot=!0);b.tagName=b.attribValue=b.attribName="";b.attribList.length=0}}else u(b,"Weird empty close tag."),b.textNode+="</>";b.state=r.TEXT}function f(a){var b=a.entity,d=b.toLowerCase(),c="";if(a.ENTITIES[b])return a.ENTITIES[b];if(a.ENTITIES[d])return a.ENTITIES[d];b=d;if("#"===b.charAt(0))if("x"===b.charAt(1)){b=b.slice(2);var f=parseInt(b,16);c=f.toString(16)}else b=b.slice(1),f=parseInt(b,10),c=f.toString(10);b=b.replace(/^0+/,"");return c.toLowerCase()!==
b?(u(a,"Invalid character entity"),"&"+a.entity+";"):String.fromCodePoint(f)}function g(a,b){"<"===b?(a.state=r.OPEN_WAKA,a.startTagPosition=a.position):t(J,b)||(u(a,"Non-whitespace before first tag."),a.textNode=b,a.state=r.TEXT)}function w(a,b){var d="";b<a.length&&(d=a.charAt(b));return d}b.parser=function(a,b){return new m(a,b)};b.SAXParser=m;b.SAXStream=p;b.createStream=function(a,b){return new p(a,b)};b.MAX_BUFFER_LENGTH=65536;var K="comment sgmlDecl textNode tagName doctype procInstName procInstBody entity attribName attribValue cdata script".split(" ");
b.EVENTS="text processinginstruction sgmldeclaration doctype comment opentagstart attribute opentag closetag opencdata cdata closecdata error end ready script opennamespace closenamespace".split(" ");Object.create||(Object.create=function(a){function b(){}b.prototype=a;return new b});Object.keys||(Object.keys=function(a){var b=[],d;for(d in a)a.hasOwnProperty(d)&&b.push(d);return b});m.prototype={end:function(){B(this)},write:function(c){if(this.error)throw this.error;if(this.closed)return z(this,
"Cannot write after close. Assign an onready handler.");if(null===c)return B(this);"object"===typeof c&&(c=c.toString());for(var h=0,e;;){this.c=e=w(c,h++);if(!e)break;this.trackPosition&&(this.position++,"\n"===e?(this.line++,this.column=0):this.column++);switch(this.state){case r.BEGIN:this.state=r.BEGIN_WHITESPACE;if("\ufeff"===e)continue;g(this,e);continue;case r.BEGIN_WHITESPACE:g(this,e);continue;case r.TEXT:if(this.sawRoot&&!this.closedRoot){for(var m=h-1;e&&"<"!==e&&"&"!==e;)(e=w(c,h++))&&
this.trackPosition&&(this.position++,"\n"===e?(this.line++,this.column=0):this.column++);this.textNode+=c.substring(m,h-1)}"<"!==e||this.sawRoot&&this.closedRoot&&!this.strict?(t(J,e)||this.sawRoot&&!this.closedRoot||u(this,"Text data outside of root node."),"&"===e?this.state=r.TEXT_ENTITY:this.textNode+=e):(this.state=r.OPEN_WAKA,this.startTagPosition=this.position);continue;case r.SCRIPT:"<"===e?this.state=r.SCRIPT_ENDING:this.script+=e;continue;case r.SCRIPT_ENDING:"/"===e?this.state=r.CLOSE_TAG:
(this.script+="<"+e,this.state=r.SCRIPT);continue;case r.OPEN_WAKA:"!"===e?(this.state=r.SGML_DECL,this.sgmlDecl=""):t(J,e)||(t(P,e)?(this.state=r.OPEN_TAG,this.tagName=e):"/"===e?(this.state=r.CLOSE_TAG,this.tagName=""):"?"===e?(this.state=r.PROC_INST,this.procInstName=this.procInstBody=""):(u(this,"Unencoded <"),this.startTagPosition+1<this.position&&(e=Array(this.position-this.startTagPosition).join(" ")+e),this.textNode+="<"+e,this.state=r.TEXT));continue;case r.SGML_DECL:(this.sgmlDecl+e).toUpperCase()===
E?(a(this,"onopencdata"),this.state=r.CDATA,this.cdata=this.sgmlDecl=""):"--"===this.sgmlDecl+e?(this.state=r.COMMENT,this.sgmlDecl=this.comment=""):(this.sgmlDecl+e).toUpperCase()===Q?(this.state=r.DOCTYPE,(this.doctype||this.sawRoot)&&u(this,"Inappropriately located doctype declaration"),this.sgmlDecl=this.doctype=""):">"===e?(a(this,"onsgmldeclaration",this.sgmlDecl),this.sgmlDecl="",this.state=r.TEXT):(t(L,e)&&(this.state=r.SGML_DECL_QUOTED),this.sgmlDecl+=e);continue;case r.SGML_DECL_QUOTED:e===
this.q&&(this.state=r.SGML_DECL,this.q="");this.sgmlDecl+=e;continue;case r.DOCTYPE:">"===e?(this.state=r.TEXT,a(this,"ondoctype",this.doctype),this.doctype=!0):(this.doctype+=e,"["===e?this.state=r.DOCTYPE_DTD:t(L,e)&&(this.state=r.DOCTYPE_QUOTED,this.q=e));continue;case r.DOCTYPE_QUOTED:this.doctype+=e;e===this.q&&(this.q="",this.state=r.DOCTYPE);continue;case r.DOCTYPE_DTD:this.doctype+=e;"]"===e?this.state=r.DOCTYPE:t(L,e)&&(this.state=r.DOCTYPE_DTD_QUOTED,this.q=e);continue;case r.DOCTYPE_DTD_QUOTED:this.doctype+=
e;e===this.q&&(this.state=r.DOCTYPE_DTD,this.q="");continue;case r.COMMENT:"-"===e?this.state=r.COMMENT_ENDING:this.comment+=e;continue;case r.COMMENT_ENDING:"-"===e?(this.state=r.COMMENT_ENDED,(this.comment=v(this.opt,this.comment))&&a(this,"oncomment",this.comment),this.comment=""):(this.comment+="-"+e,this.state=r.COMMENT);continue;case r.COMMENT_ENDED:">"!==e?(u(this,"Malformed comment"),this.comment+="--"+e,this.state=r.COMMENT):this.state=r.TEXT;continue;case r.CDATA:"]"===e?this.state=r.CDATA_ENDING:
this.cdata+=e;continue;case r.CDATA_ENDING:"]"===e?this.state=r.CDATA_ENDING_2:(this.cdata+="]"+e,this.state=r.CDATA);continue;case r.CDATA_ENDING_2:">"===e?(this.cdata&&a(this,"oncdata",this.cdata),a(this,"onclosecdata"),this.cdata="",this.state=r.TEXT):"]"===e?this.cdata+="]":(this.cdata+="]]"+e,this.state=r.CDATA);continue;case r.PROC_INST:"?"===e?this.state=r.PROC_INST_ENDING:t(J,e)?this.state=r.PROC_INST_BODY:this.procInstName+=e;continue;case r.PROC_INST_BODY:if(!this.procInstBody&&t(J,e))continue;
else"?"===e?this.state=r.PROC_INST_ENDING:this.procInstBody+=e;continue;case r.PROC_INST_ENDING:">"===e?(a(this,"onprocessinginstruction",{name:this.procInstName,body:this.procInstBody}),this.procInstName=this.procInstBody="",this.state=r.TEXT):(this.procInstBody+="?"+e,this.state=r.PROC_INST_BODY);continue;case r.OPEN_TAG:if(t(T,e))this.tagName+=e;else{this.strict||(this.tagName=this.tagName[this.looseCase]());m=this.tags[this.tags.length-1]||this;var k=this.tag={name:this.tagName,attributes:{}};
this.opt.xmlns&&(k.ns=m.ns);this.attribList.length=0;a(this,"onopentagstart",k);">"===e?A(this):"/"===e?this.state=r.OPEN_TAG_SLASH:(t(J,e)||u(this,"Invalid character in tag name"),this.state=r.ATTRIB)}continue;case r.OPEN_TAG_SLASH:">"===e?(A(this,!0),d(this)):(u(this,"Forward-slash in opening tag not followed by >"),this.state=r.ATTRIB);continue;case r.ATTRIB:if(t(J,e))continue;else">"===e?A(this):"/"===e?this.state=r.OPEN_TAG_SLASH:t(P,e)?(this.attribName=e,this.attribValue="",this.state=r.ATTRIB_NAME):
u(this,"Invalid attribute name");continue;case r.ATTRIB_NAME:"="===e?this.state=r.ATTRIB_VALUE:">"===e?(u(this,"Attribute without value"),this.attribValue=this.attribName,H(this),A(this)):t(J,e)?this.state=r.ATTRIB_NAME_SAW_WHITE:t(T,e)?this.attribName+=e:u(this,"Invalid attribute name");continue;case r.ATTRIB_NAME_SAW_WHITE:if("="===e)this.state=r.ATTRIB_VALUE;else if(t(J,e))continue;else u(this,"Attribute without value"),this.attribValue=this.tag.attributes[this.attribName]="",a(this,"onattribute",
{name:this.attribName,value:""}),this.attribName="",">"===e?A(this):t(P,e)?(this.attribName=e,this.state=r.ATTRIB_NAME):(u(this,"Invalid attribute name"),this.state=r.ATTRIB);continue;case r.ATTRIB_VALUE:if(t(J,e))continue;else t(L,e)?(this.q=e,this.state=r.ATTRIB_VALUE_QUOTED):(u(this,"Unquoted attribute value"),this.state=r.ATTRIB_VALUE_UNQUOTED,this.attribValue=e);continue;case r.ATTRIB_VALUE_QUOTED:if(e!==this.q){"&"===e?this.state=r.ATTRIB_VALUE_ENTITY_Q:this.attribValue+=e;continue}H(this);
this.q="";this.state=r.ATTRIB_VALUE_CLOSED;continue;case r.ATTRIB_VALUE_CLOSED:t(J,e)?this.state=r.ATTRIB:">"===e?A(this):"/"===e?this.state=r.OPEN_TAG_SLASH:t(P,e)?(u(this,"No whitespace between attributes"),this.attribName=e,this.attribValue="",this.state=r.ATTRIB_NAME):u(this,"Invalid attribute name");continue;case r.ATTRIB_VALUE_UNQUOTED:if(!t(C,e)){"&"===e?this.state=r.ATTRIB_VALUE_ENTITY_U:this.attribValue+=e;continue}H(this);">"===e?A(this):this.state=r.ATTRIB;continue;case r.CLOSE_TAG:if(this.tagName)">"===
e?d(this):t(T,e)?this.tagName+=e:this.script?(this.script+="</"+this.tagName,this.tagName="",this.state=r.SCRIPT):(t(J,e)||u(this,"Invalid tagname in closing tag"),this.state=r.CLOSE_TAG_SAW_WHITE);else if(t(J,e))continue;else t(P,e)?this.tagName=e:this.script?(this.script+="</"+e,this.state=r.SCRIPT):u(this,"Invalid tagname in closing tag.");continue;case r.CLOSE_TAG_SAW_WHITE:if(t(J,e))continue;">"===e?d(this):u(this,"Invalid characters in closing tag");continue;case r.TEXT_ENTITY:case r.ATTRIB_VALUE_ENTITY_Q:case r.ATTRIB_VALUE_ENTITY_U:switch(this.state){case r.TEXT_ENTITY:var x=
r.TEXT;var p="textNode";break;case r.ATTRIB_VALUE_ENTITY_Q:x=r.ATTRIB_VALUE_QUOTED;p="attribValue";break;case r.ATTRIB_VALUE_ENTITY_U:x=r.ATTRIB_VALUE_UNQUOTED,p="attribValue"}";"===e?(this[p]+=f(this),this.entity="",this.state=x):t(this.entity.length?V:U,e)?this.entity+=e:(u(this,"Invalid character in entity name"),this[p]+="&"+this.entity+e,this.entity="",this.state=x);continue;default:throw Error(this,"Unknown state: "+this.state);}}if(this.position>=this.bufferCheckPosition){c=Math.max(b.MAX_BUFFER_LENGTH,
10);e=h=0;for(x=K.length;e<x;e++){p=this[K[e]].length;if(p>c)switch(K[e]){case "textNode":l(this);break;case "cdata":a(this,"oncdata",this.cdata);this.cdata="";break;case "script":a(this,"onscript",this.script);this.script="";break;default:z(this,"Max buffer length exceeded: "+K[e])}h=Math.max(h,p)}this.bufferCheckPosition=b.MAX_BUFFER_LENGTH-h+this.position}return this},resume:function(){this.error=null;return this},close:function(){return this.write(null)},flush:function(){l(this);""!==this.cdata&&
(a(this,"oncdata",this.cdata),this.cdata="");""!==this.script&&(a(this,"onscript",this.script),this.script="")}};try{var x=c("stream").Stream}catch(O){x=function(){}}var N=b.EVENTS.filter(function(a){return"error"!==a&&"end"!==a});p.prototype=Object.create(x.prototype,{constructor:{value:p}});p.prototype.write=function(a){"function"===typeof k&&"function"===typeof k.isBuffer&&k.isBuffer(a)&&(this._decoder||(this._decoder=new (c("string_decoder").StringDecoder)("utf8")),a=this._decoder.write(a));this._parser.write(a.toString());
this.emit("data",a);return!0};p.prototype.end=function(a){a&&a.length&&this.write(a);this._parser.end();return!0};p.prototype.on=function(a,b){var d=this;d._parser["on"+a]||-1===N.indexOf(a)||(d._parser["on"+a]=function(){var b=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);b.splice(0,0,a);d.emit.apply(d,b)});return x.prototype.on.call(d,a,b)};var J="\r\n\t ",M="0124356789",G="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",L="'\"",C=J+">",E="[CDATA[",Q="DOCTYPE",h="http://www.w3.org/XML/1998/namespace",
e="http://www.w3.org/2000/xmlns/",F={xml:h,xmlns:e};J=n(J);M=n(M);G=n(G);var P=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,T=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,U=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,
V=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;L=n(L);C=n(C);var r=0;b.STATE={BEGIN:r++,BEGIN_WHITESPACE:r++,TEXT:r++,TEXT_ENTITY:r++,OPEN_WAKA:r++,SGML_DECL:r++,SGML_DECL_QUOTED:r++,DOCTYPE:r++,DOCTYPE_QUOTED:r++,DOCTYPE_DTD:r++,DOCTYPE_DTD_QUOTED:r++,COMMENT_STARTING:r++,COMMENT:r++,COMMENT_ENDING:r++,COMMENT_ENDED:r++,CDATA:r++,CDATA_ENDING:r++,CDATA_ENDING_2:r++,
PROC_INST:r++,PROC_INST_BODY:r++,PROC_INST_ENDING:r++,OPEN_TAG:r++,OPEN_TAG_SLASH:r++,ATTRIB:r++,ATTRIB_NAME:r++,ATTRIB_NAME_SAW_WHITE:r++,ATTRIB_VALUE:r++,ATTRIB_VALUE_QUOTED:r++,ATTRIB_VALUE_CLOSED:r++,ATTRIB_VALUE_UNQUOTED:r++,ATTRIB_VALUE_ENTITY_Q:r++,ATTRIB_VALUE_ENTITY_U:r++,CLOSE_TAG:r++,CLOSE_TAG_SAW_WHITE:r++,SCRIPT:r++,SCRIPT_ENDING:r++};b.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"};b.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,
Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,
ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,
Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,
zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,
ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830};Object.keys(b.ENTITIES).forEach(function(a){var d=b.ENTITIES[a];d="number"===
typeof d?String.fromCharCode(d):d;b.ENTITIES[a]=d});for(var S in b.STATE)b.STATE[b.STATE[S]]=S;r=b.STATE;String.fromCodePoint||function(){var a=String.fromCharCode,b=Math.floor,d=function(){var d=[],c=-1,f=arguments.length;if(!f)return"";for(var g="";++c<f;){var e=Number(arguments[c]);if(!isFinite(e)||0>e||1114111<e||b(e)!==e)throw RangeError("Invalid code point: "+e);if(65535>=e)d.push(e);else{e-=65536;var h=(e>>10)+55296;e=e%1024+56320;d.push(h,e)}if(c+1===f||16384<d.length)g+=a.apply(null,d),d.length=
0}return g};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:d,configurable:!0,writable:!0}):String.fromCodePoint=d}()})("undefined"===typeof n?this.sax={}:n)}).call(this,c("buffer").Buffer)},{buffer:5,stream:27,string_decoder:3}],27:[function(c,q,n){function k(){b.call(this)}q.exports=k;var b=c("events").EventEmitter;c("inherits")(k,b);k.Readable=c("readable-stream/readable.js");k.Writable=c("readable-stream/writable.js");k.Duplex=c("readable-stream/duplex.js");k.Transform=
c("readable-stream/transform.js");k.PassThrough=c("readable-stream/passthrough.js");k.Stream=k;k.prototype.pipe=function(c,k){function m(a){c.writable&&!1===c.write(a)&&n.pause&&n.pause()}function p(){n.readable&&n.resume&&n.resume()}function a(){u||(u=!0,c.end())}function l(){u||(u=!0,"function"===typeof c.destroy&&c.destroy())}function v(a){z();if(0===b.listenerCount(this,"error"))throw a;}function z(){n.removeListener("data",m);c.removeListener("drain",p);n.removeListener("end",a);n.removeListener("close",
l);n.removeListener("error",v);c.removeListener("error",v);n.removeListener("end",z);n.removeListener("close",z);c.removeListener("close",z)}var n=this;n.on("data",m);c.on("drain",p);c._isStdio||k&&!1===k.end||(n.on("end",a),n.on("close",l));var u=!1;n.on("error",v);c.on("error",v);n.on("end",z);n.on("close",z);c.on("close",z);c.emit("pipe",n);return c}},{events:7,inherits:9,"readable-stream/duplex.js":14,"readable-stream/passthrough.js":21,"readable-stream/readable.js":22,"readable-stream/transform.js":23,
"readable-stream/writable.js":24}],28:[function(c,q,n){function k(b){return b.toString(this.encoding)}function b(b){this.charLength=(this.charReceived=b.length%2)?2:0}function m(b){this.charLength=(this.charReceived=b.length%3)?3:0}var p=c("buffer").Buffer,y=p.isEncoding||function(b){switch(b&&b.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};c=n.StringDecoder=
function(c){this.encoding=(c||"utf8").toLowerCase().replace(/[-_]/,"");if(c&&!y(c))throw Error("Unknown encoding: "+c);switch(this.encoding){case "utf8":this.surrogateSize=3;break;case "ucs2":case "utf16le":this.surrogateSize=2;this.detectIncompleteChar=b;break;case "base64":this.surrogateSize=3;this.detectIncompleteChar=m;break;default:this.write=k;return}this.charBuffer=new p(6);this.charLength=this.charReceived=0};c.prototype.write=function(b){for(var a="";this.charLength;){a=b.length>=this.charLength-
this.charReceived?this.charLength-this.charReceived:b.length;b.copy(this.charBuffer,this.charReceived,0,a);this.charReceived+=a;if(this.charReceived<this.charLength)return"";b=b.slice(a,b.length);a=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var c=a.charCodeAt(a.length-1);if(55296<=c&&56319>=c)this.charLength+=this.surrogateSize,a="";else{this.charReceived=this.charLength=0;if(0===b.length)return a;break}}this.detectIncompleteChar(b);var k=b.length;this.charLength&&(b.copy(this.charBuffer,
0,b.length-this.charReceived,k),k-=this.charReceived);a+=b.toString(this.encoding,0,k);k=a.length-1;c=a.charCodeAt(k);return 55296<=c&&56319>=c?(c=this.surrogateSize,this.charLength+=c,this.charReceived+=c,this.charBuffer.copy(this.charBuffer,c,0,c),b.copy(this.charBuffer,0,0,c),a.substring(0,k)):a};c.prototype.detectIncompleteChar=function(b){for(var a=3<=b.length?3:b.length;0<a;a--){var c=b[b.length-a];if(1==a&&6==c>>5){this.charLength=2;break}if(2>=a&&14==c>>4){this.charLength=3;break}if(3>=a&&
30==c>>3){this.charLength=4;break}}this.charReceived=a};c.prototype.end=function(b){var a="";b&&b.length&&(a=this.write(b));this.charReceived&&(b=this.encoding,a+=this.charBuffer.slice(0,this.charReceived).toString(b));return a}},{buffer:5}],29:[function(c,q,n){(function(k,b){function m(a,b){this._id=a;this._clearFn=b}var p=c("process/browser.js").nextTick,q=Function.prototype.apply,t=Array.prototype.slice,a={},l=0;n.setTimeout=function(){return new m(q.call(setTimeout,window,arguments),clearTimeout)};
n.setInterval=function(){return new m(q.call(setInterval,window,arguments),clearInterval)};n.clearTimeout=n.clearInterval=function(a){a.close()};m.prototype.unref=m.prototype.ref=function(){};m.prototype.close=function(){this._clearFn.call(window,this._id)};n.enroll=function(a,b){clearTimeout(a._idleTimeoutId);a._idleTimeout=b};n.unenroll=function(a){clearTimeout(a._idleTimeoutId);a._idleTimeout=-1};n._unrefActive=n.active=function(a){clearTimeout(a._idleTimeoutId);var b=a._idleTimeout;0<=b&&(a._idleTimeoutId=
setTimeout(function(){a._onTimeout&&a._onTimeout()},b))};n.setImmediate="function"===typeof k?k:function(b){var c=l++,k=2>arguments.length?!1:t.call(arguments,1);a[c]=!0;p(function(){a[c]&&(k?b.apply(null,k):b.call(null),n.clearImmediate(c))});return c};n.clearImmediate="function"===typeof b?b:function(b){delete a[b]}}).call(this,c("timers").setImmediate,c("timers").clearImmediate)},{"process/browser.js":13,timers:29}],30:[function(c,q,n){(function(c){function b(b){try{if(!c.localStorage)return!1}catch(p){return!1}b=
c.localStorage[b];return null==b?!1:"true"===String(b).toLowerCase()}q.exports=function(c,k){if(b("noDeprecation"))return c;var m=!1;return function(){if(!m){if(b("throwDeprecation"))throw Error(k);b("traceDeprecation")?console.trace(k):console.warn(k);m=!0}return c.apply(this,arguments)}}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],31:[function(c,q,n){(function(c,b,m,n,q){function k(a){if("contents"in a){var b="styleAttrs"in
a?a.styleAttrs[n.byName.ruby.qname]:null;b="span"===a.kind&&("container"===b||"textContainer"===b||"baseContainer"===b);for(var d=a.contents.length-1;0<=d;d--)!b||"styleAttrs"in a.contents[d]&&n.byName.ruby.qname in a.contents[d].styleAttrs?k(a.contents[d]):delete a.contents[d]}}function a(b,d,c,f){var g=f&&"seq"===f.timeContainer,e=0;f&&(e=g&&c?c.end:f.begin);d.begin=d.explicit_begin?d.explicit_begin+e:e;c=d.begin;f=null;for(var h in d.sets)a(b,d.sets[h],f,d),c="seq"===d.timeContainer?d.sets[h].end:
Math.max(c,d.sets[h].end),f=d.sets[h];if("contents"in d)for(var l in d.contents)a(b,d.contents[l],f,d),c="seq"===d.timeContainer?d.contents[l].end:Math.max(c,d.contents[l].end),f=d.contents[l];else c=g?d.begin:Number.POSITIVE_INFINITY;d.end=null!==d.explicit_end&&null!==d.explicit_dur?Math.min(d.begin+d.explicit_dur,e+d.explicit_end):null===d.explicit_end&&null!==d.explicit_dur?d.begin+d.explicit_dur:null!==d.explicit_end&&null===d.explicit_dur?e+d.explicit_end:c;delete d.explicit_begin;delete d.explicit_dur;
delete d.explicit_end;b._registerEvent(d)}function l(a){this.node=a}function v(){this.events=[];this.head=new z;this.body=null}function z(){this.styling=new p;this.layout=new y}function p(){this.styles={};this.initials={}}function u(){this.styleRefs=this.styleAttrs=this.id=null}function D(){this.styleAttrs=null}function y(){this.regions={}}function A(a,b){this.kind="image";this.src=a;this.type=b}function d(a){this.id=a}function f(a){this.regionID=a}function g(a){this.styleAttrs=a}function w(a){this.sets=
a}function K(a){this.contents=a}function x(a,b,d){this.explicit_begin=a;this.explicit_end=b;this.explicit_dur=d}function N(){this.kind="body"}function J(){this.kind="div"}function M(){this.kind="p"}function G(){this.kind="span"}function L(){this.kind="span"}function C(){this.kind="br"}function E(){}function Q(){}function h(a){return a&&"xml:id"in a.attributes?a.attributes["xml:id"].value||null:null}function e(a){return a&&"style"in a.attributes?a.attributes.style.value.split(" "):[]}function F(a,
b){var d={};if(null!==a)for(var c in a.attributes){var f=a.attributes[c].uri+" "+a.attributes[c].local,g=n.byQName[f];if(void 0!==g){var e=g.parse(a.attributes[c].value);null!==e?(d[f]=e,g===n.byName.zIndex&&O(b,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):R(b,"Cannot parse styling attribute "+f+" --\x3e "+a.attributes[c].value)}}return d}function P(a,b,d){for(var c in a.attributes)if(a.attributes[c].uri===b&&a.attributes[c].local===d)return a.attributes[c].value;
return null}function T(a,b){a=P(a,m.ns_tts,"extent");if(null===a)return null;var d=a.split(" ");if(2!==d.length)return O(b,"Malformed extent (ignoring)"),null;a=q.parseLength(d[0]);d=q.parseLength(d[1]);return d&&a?{h:d,w:a}:(O(b,"Malformed extent values (ignoring)"),null)}function U(a,b,d){var c=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/,f=/^(\d{2,}):(\d\d):(\d\d):(\d{2,})$/,g=/^(\d+(?:\.\d+)?)t$/,e=/^(\d+(?:\.\d+)?)ms$/,h=/^(\d+(?:\.\d+)?)s$/,l=/^(\d+(?:\.\d+)?)h$/,k=/^(\d+(?:\.\d+)?)m$/,m,w=null;null!==
(m=/^(\d+(?:\.\d+)?)f$/.exec(d))?null!==b&&(w=parseFloat(m[1])/b):null!==(m=g.exec(d))?null!==a&&(w=parseFloat(m[1])/a):null!==(m=e.exec(d))?w=parseFloat(m[1])/1E3:null!==(m=h.exec(d))?w=parseFloat(m[1]):null!==(m=l.exec(d))?w=3600*parseFloat(m[1]):null!==(m=k.exec(d))?w=60*parseFloat(m[1]):null!==(m=c.exec(d))?w=3600*parseInt(m[1])+60*parseInt(m[2])+parseFloat(m[3]):null!==(m=f.exec(d))&&null!==b&&(w=3600*parseInt(m[1])+60*parseInt(m[2])+parseInt(m[3])+(null===m[4]?0:parseInt(m[4])/b));return w}
function V(a,b,d){for(;0<b.styleRefs.length;){var c=b.styleRefs.pop();c in a.styles?(V(a,a.styles[c],d),S(a.styles[c].styleAttrs,b.styleAttrs)):R(d,"Non-existant style id referenced")}}function r(a,b,d,c){for(var f=b.length-1;0<=f;f--){var g=b[f];g in a.styles?S(a.styles[g].styleAttrs,d):R(c,"Non-existant style id referenced")}}function S(a,b){for(var d in a)d in b||(b[d]=a[d])}function O(a,b){if(a&&a.warn&&a.warn(b))throw b;}function R(a,b){if(a&&a.error&&a.error(b))throw b;}function I(a,b){a&&a.fatal&&
a.fatal(b);throw b;}function Y(a,b){for(var d=0,c=a.length-1,f;d<=c;){f=Math.floor((d+c)/2);var g=a[f];if(g<b)d=f+1;else if(g>b)c=f-1;else return{found:!0,index:f}}return{found:!1,index:d}}c.fromXML=function(d,c,f){var g=b.parser(!0,{xmlns:!0}),e=[],h=[],w=[],x=0,q=null;g.onclosetag=function(a){if(e[0]instanceof E)null!==q.head&&null!==q.head.styling&&r(q.head.styling,e[0].styleRefs,e[0].styleAttrs,c),delete e[0].styleRefs;else if(e[0]instanceof p)for(var b in e[0].styles)V(e[0],e[0].styles[b],c);
else if(e[0]instanceof M||e[0]instanceof G){if(1<e[0].contents.length){a=[e[0].contents[0]];for(b=1;b<e[0].contents.length;b++)e[0].contents[b]instanceof L&&a[a.length-1]instanceof L?a[a.length-1].text+=e[0].contents[b].text:a.push(e[0].contents[b]);e[0].contents=a}e[0]instanceof G&&1===e[0].contents.length&&e[0].contents[0]instanceof L&&(e[0].text=e[0].contents[0].text,delete e[0].contents)}else if(e[0]instanceof l)if(e[0].node.uri===m.ns_tt&&"metadata"===e[0].node.local)x--;else if(0<x&&f&&"onCloseTag"in
f)f.onCloseTag();w.shift();h.shift();e.shift()};g.ontext=function(a){if(void 0!==e[0])if(e[0]instanceof G||e[0]instanceof M){if(e[0]instanceof G){var b=e[0].styleAttrs[n.byName.ruby.qname];if("container"===b||"textContainer"===b||"baseContainer"===b)return}b=new L;b.initFromText(q,e[0],a,h[0],w[0],c);e[0].contents.push(b)}else if(e[0]instanceof l&&0<x&&f&&"onText"in f)f.onText(a)};g.onopentag=function(a){var b=a.attributes["xml:space"];b?w.unshift(b.value):0===w.length?w.unshift("default"):w.unshift(w[0]);
(b=a.attributes["xml:lang"])?h.unshift(b.value):0===h.length?h.unshift(""):h.unshift(h[0]);if(a.uri===m.ns_tt)if("tt"===a.local)null!==q&&I(c,"Two <tt> elements at ("+this.line+","+this.column+")"),q=new v,q.initFromNode(a,h[0],c),e.unshift(q);else if("head"===a.local)e[0]instanceof v||I(c,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),e.unshift(q.head);else if("styling"===a.local)e[0]instanceof z||I(c,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+
")"),e.unshift(q.head.styling);else if("style"===a.local)if(e[0]instanceof p){var d=new u;d.initFromNode(a,c);d.id?q.head.styling.styles[d.id]=d:R(c,"<style> element missing @id attribute");e.unshift(d)}else e[0]instanceof E?(d=new u,d.initFromNode(a,c),S(d.styleAttrs,e[0].styleAttrs),e.unshift(d)):I(c,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")");else if("initial"===a.local)if(e[0]instanceof p){b=new D;b.initFromNode(a,c);for(d in b.styleAttrs)q.head.styling.initials[d]=
b.styleAttrs[d];e.unshift(b)}else I(c,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")");else if("layout"===a.local)e[0]instanceof z||I(c,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),e.unshift(q.head.layout);else if("region"===a.local)e[0]instanceof y||I(c,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")"),d=new E,d.initFromNode(q,a,h[0],c),!d.id||d.id in q.head.layout.regions?R(c,"Ignoring <region> with duplicate or missing @id at "+
this.line+","+this.column+")"):q.head.layout.regions[d.id]=d,e.unshift(d);else if("body"===a.local)e[0]instanceof v||I(c,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==q.body&&I(c,"Second <body> element at "+this.line+","+this.column+")"),d=new N,d.initFromNode(q,a,h[0],c),q.body=d,e.unshift(d);else if("div"===a.local){e[0]instanceof J||e[0]instanceof N||I(c,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");d=new J;d.initFromNode(q,
e[0],a,h[0],c);if(b=d.styleAttrs[n.byName.backgroundImage.qname])d.contents.push(new A(b)),delete d.styleAttrs[n.byName.backgroundImage.qname];e[0].contents.push(d);e.unshift(d)}else"image"===a.local?(e[0]instanceof J||I(c,"Parent of <image> element is not <div> at "+this.line+","+this.column+")"),d=new A,d.initFromNode(q,e[0],a,h[0],c),e[0].contents.push(d),e.unshift(d)):"p"===a.local?(e[0]instanceof J||I(c,"Parent of <p> element is not <div> at "+this.line+","+this.column+")"),d=new M,d.initFromNode(q,
e[0],a,h[0],c),e[0].contents.push(d),e.unshift(d)):"span"===a.local?(e[0]instanceof G||e[0]instanceof M||I(c,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")"),d=new G,d.initFromNode(q,e[0],a,h[0],w[0],c),e[0].contents.push(d),e.unshift(d)):"br"===a.local?(e[0]instanceof G||e[0]instanceof M||I(c,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")"),d=new C,d.initFromNode(q,e[0],a,h[0],c),e[0].contents.push(d),e.unshift(d)):"set"===a.local?
(e[0]instanceof G||e[0]instanceof M||e[0]instanceof J||e[0]instanceof N||e[0]instanceof E||e[0]instanceof C||I(c,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")"),d=new Q,d.initFromNode(q,e[0],a,c),e[0].sets.push(d),e.unshift(d)):e.unshift(new l(a));else e.unshift(new l(a));if(e[0]instanceof l)if(a.uri===m.ns_tt&&"metadata"===a.local)x++;else if(0<x&&f&&"onOpenTag"in f){d=[];for(var g in a.attributes)d[a.attributes[g].uri+" "+a.attributes[g].local]=
{uri:a.attributes[g].uri,local:a.attributes[g].local,value:a.attributes[g].value};f.onOpenTag(a.uri,a.local,d)}};g.write(d).close();delete q.head.styling.styles;d=!1;for(var t in q.head.layout.regions){d=!0;break}d||(t=E.prototype.createDefaultRegion(q.lang),q.head.layout.regions[t.id]=t);for(var W in q.head.layout.regions)a(q,q.head.layout.regions[W],null,null);q.body&&a(q,q.body,null,null);q.body&&k(q.body);return q};v.prototype.initFromNode=function(a,b,d){var c=P(a,m.ns_ttp,"cellResolution"),
f=15;var e=32;null!==c&&(c=/(\d+) (\d+)/.exec(c),null!==c?(e=parseInt(c[1]),f=parseInt(c[2])):O(d,"Malformed cellResolution value (using initial value instead)"));this.cellLength={h:new q.ComputedLength(0,1/f),w:new q.ComputedLength(1/e,0)};f=P(a,m.ns_ttp,"frameRate");c=30;null!==f&&(e=/(\d+)/.exec(f),null!==e?c=parseInt(e[1]):O(d,"Malformed frame rate attribute (using initial value instead)"));e=P(a,m.ns_ttp,"frameRateMultiplier");var g=1;null!==e&&(e=/(\d+) (\d+)/.exec(e),null!==e?g=parseInt(e[1])/
parseInt(e[2]):O(d,"Malformed frame rate multiplier attribute (using initial value instead)"));c*=g;g=1;e=P(a,m.ns_ttp,"tickRate");null===e?null!==f&&(g=c):(e=/(\d+)/.exec(e),null!==e?g=parseInt(e[1]):O(d,"Malformed tick rate attribute (using initial value instead)"));this.effectiveFrameRate=c;this.tickRate=g;e=P(a,m.ns_ittp,"aspectRatio");null===e&&(e=P(a,m.ns_ttp,"displayAspectRatio"));f=null;null!==e&&(c=/(\d+)\s+(\d+)/.exec(e),null!==c?(e=parseInt(c[1]),c=parseInt(c[2]),0!==e&&0!==c?f=e/c:R(d,
"Illegal aspectRatio values (ignoring)")):R(d,"Malformed aspectRatio attribute (ignoring)"));this.aspectRatio=f;f=P(a,m.ns_ttp,"timeBase");null!==f&&"media"!==f&&I(d,"Unsupported time base");a=T(a,d);null===a?this.pxLength={h:null,w:null}:("px"===a.h.unit&&"px"===a.w.unit||I(d,"Extent on TT must be in px or absent"),this.pxLength={h:new q.ComputedLength(0,1/a.h.value),w:new q.ComputedLength(1/a.w.value,0)});this.dimensions={h:new q.ComputedLength(0,1),w:new q.ComputedLength(1,0)};this.lang=b};v.prototype._registerEvent=
function(a){if(!(a.end<=a.begin)){var b=Y(this.events,a.begin);b.found||this.events.splice(b.index,0,a.begin);a.end!==Number.POSITIVE_INFINITY&&(b=Y(this.events,a.end),b.found||this.events.splice(b.index,0,a.end))}};v.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]};v.prototype.getMediaTimeEvents=function(){return this.events};u.prototype.initFromNode=function(a,b){this.id=h(a);this.styleAttrs=F(a,b);this.styleRefs=e(a)};D.prototype.initFromNode=function(a,
b){this.styleAttrs={};for(var d in a.attributes)if(a.attributes[d].uri===m.ns_itts||a.attributes[d].uri===m.ns_ebutts||a.attributes[d].uri===m.ns_tts)this.styleAttrs[a.attributes[d].uri+" "+a.attributes[d].local]=a.attributes[d].value};A.prototype.initFromNode=function(a,b,d,c,e){(this.src="src"in d.attributes?d.attributes.src.value:null)||R(e,"Invalid image@src attribute");(this.type="type"in d.attributes?d.attributes.type.value:null)||R(e,"Invalid image@type attribute");g.prototype.initFromNode.call(this,
a,b,d,e);x.prototype.initFromNode.call(this,a,b,d,e);w.prototype.initFromNode.call(this,a,b,d,e);f.prototype.initFromNode.call(this,a,b,d,e);this.lang=c};d.prototype.initFromNode=function(a,b,d,c){this.id=h(d)};f.prototype.initFromNode=function(a,b,d,c){this.regionID=d&&"region"in d.attributes?d.attributes.region.value:""};g.prototype.initFromNode=function(a,b,d,c){this.styleAttrs=F(d,c);null!==a.head&&null!==a.head.styling&&r(a.head.styling,e(d),this.styleAttrs,c)};w.prototype.initFromNode=function(a,
b,d,c){this.sets=[]};K.prototype.initFromNode=function(a,b,d,c){this.contents=[]};x.prototype.initFromNode=function(a,b,d,c){b=null;d&&"begin"in d.attributes&&(b=U(a.tickRate,a.effectiveFrameRate,d.attributes.begin.value),null===b&&O(c,"Malformed begin value "+d.attributes.begin.value+" (using 0)"));var f=null;d&&"dur"in d.attributes&&(f=U(a.tickRate,a.effectiveFrameRate,d.attributes.dur.value),null===f&&O(c,"Malformed dur value "+d.attributes.dur.value+" (ignoring)"));var e=null;d&&"end"in d.attributes&&
(e=U(a.tickRate,a.effectiveFrameRate,d.attributes.end.value),null===e&&O(c,"Malformed end value (ignoring)"));this.explicit_begin=b;this.explicit_end=e;this.explicit_dur=f;(a=d&&"timeContainer"in d.attributes?d.attributes.timeContainer.value:null)&&"par"!==a?"seq"===a?c="seq":(R(c,"Illegal value of timeContainer (assuming 'par')"),c="par"):c="par";this.timeContainer=c};N.prototype.initFromNode=function(a,b,d,c){g.prototype.initFromNode.call(this,a,null,b,c);x.prototype.initFromNode.call(this,a,null,
b,c);w.prototype.initFromNode.call(this,a,null,b,c);f.prototype.initFromNode.call(this,a,null,b,c);K.prototype.initFromNode.call(this,a,null,b,c);this.lang=d};J.prototype.initFromNode=function(a,b,d,c,e){g.prototype.initFromNode.call(this,a,b,d,e);x.prototype.initFromNode.call(this,a,b,d,e);w.prototype.initFromNode.call(this,a,b,d,e);f.prototype.initFromNode.call(this,a,b,d,e);K.prototype.initFromNode.call(this,a,b,d,e);this.lang=c};M.prototype.initFromNode=function(a,b,d,c,e){g.prototype.initFromNode.call(this,
a,b,d,e);x.prototype.initFromNode.call(this,a,b,d,e);w.prototype.initFromNode.call(this,a,b,d,e);f.prototype.initFromNode.call(this,a,b,d,e);K.prototype.initFromNode.call(this,a,b,d,e);this.lang=c};G.prototype.initFromNode=function(a,b,d,c,e,h){g.prototype.initFromNode.call(this,a,b,d,h);x.prototype.initFromNode.call(this,a,b,d,h);w.prototype.initFromNode.call(this,a,b,d,h);f.prototype.initFromNode.call(this,a,b,d,h);K.prototype.initFromNode.call(this,a,b,d,h);this.space=e;this.lang=c};L.prototype.initFromText=
function(a,b,d,c,f,e){x.prototype.initFromNode.call(this,a,b,null,e);this.text=d;this.space=f;this.lang=c};C.prototype.initFromNode=function(a,b,d,c,e){f.prototype.initFromNode.call(this,a,b,d,e);x.prototype.initFromNode.call(this,a,b,d,e);this.lang=c};E.prototype.createDefaultRegion=function(a){var b=new E;b.id="";b.styleAttrs={};b.sets=[];x.call(b,0,Number.POSITIVE_INFINITY,null);this.lang=a;return b};E.prototype.initFromNode=function(a,b,c,f){d.prototype.initFromNode.call(this,a,null,b,f);x.prototype.initFromNode.call(this,
a,null,b,f);w.prototype.initFromNode.call(this,a,null,b,f);this.styleAttrs=F(b,f);this.styleRefs=e(b);this.lang=c};Q.prototype.initFromNode=function(a,b,d,c){x.prototype.initFromNode.call(this,a,b,d,c);a=F(d,c);this.value=this.qname=null;for(var f in a){if(this.qname){R(c,"More than one style specified on set");break}this.qname=f;this.value=a[f]}}})("undefined"===typeof n?this.imscDoc={}:n,"undefined"===typeof sax?c("sax"):sax,"undefined"===typeof imscNames?c("./names"):imscNames,"undefined"===typeof imscStyles?
c("./styles"):imscStyles,"undefined"===typeof imscUtils?c("./utils"):imscUtils)},{"./names":35,"./styles":36,"./utils":37,sax:26}],32:[function(c,q,n){(function(c,b,m){function k(b,c,g,w){if("region"===g.kind){var d=document.createElement("div");d.style.position="absolute"}else if("body"===g.kind)d=document.createElement("div");else if("div"===g.kind)d=document.createElement("div");else if("image"===g.kind){if(d=document.createElement("img"),null!==b.imgResolver&&null!==g.src){var f=b.imgResolver(g.src,
d);f&&(d.src=f);d.height=b.regionH;d.width=b.regionW}}else if("p"===g.kind)d=document.createElement("p");else if("span"===g.kind)if("container"===g.styleAttrs[m.byName.ruby.qname])d=document.createElement("ruby"),b.ruby=!0;else if("base"===g.styleAttrs[m.byName.ruby.qname])d=document.createElement("rb");else if("text"===g.styleAttrs[m.byName.ruby.qname])d=document.createElement("rt");else if("baseContainer"===g.styleAttrs[m.byName.ruby.qname])d=document.createElement("rbc");else if("textContainer"===
g.styleAttrs[m.byName.ruby.qname])d=document.createElement("rtc");else{if("delimiter"===g.styleAttrs[m.byName.ruby.qname])return;d=document.createElement("span")}else"br"===g.kind&&(d=document.createElement("br"));if(d){!g.lang||"region"!==g.kind&&g.lang===w.lang||(d.lang=g.lang);c.appendChild(d);d.style.margin="0";if("region"===g.kind)if(c=g.styleAttrs[m.byName.writingMode.qname],"lrtb"===c||"lr"===c)b.ipd="lr",b.bpd="tb";else if("rltb"===c||"rl"===c)b.ipd="rl",b.bpd="tb";else if("tblr"===c)b.ipd=
"tb",b.bpd="lr";else{if("tbrl"===c||"tb"===c)b.ipd="tb",b.bpd="rl"}else"p"===g.kind&&"tb"===b.bpd&&(b.ipd="ltr"===g.styleAttrs[m.byName.direction.qname]?"lr":"rl");for(var v in z)c=z[v],w=g.styleAttrs[c.qname],void 0!==w&&null!==c.map&&c.map(b,d,g,w);v=d;(c=g.styleAttrs[m.byName.linePadding.qname])&&!c.isZero()&&(w=c.toUsedLength(b.w,b.h),0<w&&(w=Math.ceil(w)+"px","tb"===b.bpd?(v.style.paddingLeft=w,v.style.paddingRight=w):(v.style.paddingTop=w,v.style.paddingBottom=w),b.lp=c));(c=g.styleAttrs[m.byName.multiRowAlign.qname])&&
"auto"!==c&&(v=document.createElement("span"),v.style.display="inline-block",v.style.textAlign=c,d.appendChild(v),b.mra=c);(c=g.styleAttrs[m.byName.rubyReserve.qname])&&"none"!==c[0]&&(b.rubyReserve=c);g.styleAttrs[m.byName.fillLineGap.qname]&&(b.flg=!0);if("span"===g.kind&&g.text)if((c=g.styleAttrs[m.byName.textEmphasis.qname])&&"none"!==c.style&&(b.textEmphasis=!0),m.byName.textCombine.qname in g.styleAttrs&&"all"===g.styleAttrs[m.byName.textCombine.qname])d.textContent=g.text,c&&l(b,d,g,c);else for(w=
"",f=0;f<g.text.length;f++){w+=g.text.charAt(f);var p=g.text.charCodeAt(f);if(55296>p||56319<p||f===g.text.length)p=document.createElement("span"),p.textContent=w,c&&l(b,p,g,c),d.appendChild(p),w=""}for(var t in g.contents)k(b,v,g.contents[t],g);t=[];if((b.lp||b.mra||b.flg||b.ruby||b.textEmphasis||b.rubyReserve)&&"p"===g.kind){a(b,v,t,null);if(b.rubyReserve){for(c=0;c<t.length;c++){w=document.createElement("ruby");f=document.createElement("rb");f.textContent="\u200b";w.appendChild(f);var B=b.rubyReserve[1].toUsedLength(b.w,
b.h)+"px";"both"===b.rubyReserve[0]||"outside"===b.rubyReserve[0]&&1==t.length?(f=document.createElement("rtc"),f.style[D]=u?"after":"under",f.textContent="\u200b",f.style.fontSize=B,p=document.createElement("rtc"),p.style[D]=u?"before":"over",p.textContent="\u200b",p.style.fontSize=B,w.appendChild(f),w.appendChild(p)):(f=document.createElement("rtc"),f.textContent="\u200b",f.style.fontSize=B,f.style[D]="after"===b.rubyReserve[0]||"outside"===b.rubyReserve[0]&&0<c?u?"after":"tb"===b.bpd||"rl"===b.bpd?
"under":"over":u?"before":"tb"===b.bpd||"rl"===b.bpd?"over":"under",w.appendChild(f));f=null;for(p=0;p<t[c].rbc.length;p++)if("ruby"===t[c].rbc[p].localName){f=t[c].rbc[p];for(p=0;p<f.style.length;p++)w.style.setProperty(f.style.item(p),f.style.getPropertyValue(f.style.item(p)));break}f=f||t[c].elements[0].node;f.parentElement.insertBefore(w,f)}b.rubyReserve=null}if(b.ruby||b.rubyReserve){for(c=0;c<t.length;c++)for(w=0;w<t[c].rbc.length;w++)t[c].rbc[w].style[D]||(t[c].rbc[w].style[D]=u?0===c?"before":
"after":"tb"===b.bpd?0===c?"over":"under":"rl"===b.bpd?0===c?"over":"under":0===c?"under":"over");b.ruby=null}if(b.textEmphasis){for(c=0;c<t.length;c++)for(w=0;w<t[c].te.length;w++)t[c].te[w].style[A]&&"none"!==t[c].te[w].style[A]||(t[c].te[w].style[A]="tb"===b.bpd?0===c?"left over":"left under":"rl"===b.bpd?0===c?"right under":"left under":0===c?"left under":"right under");b.textEmphasis=null}if(b.mra){for(c=0;c<t.length-1;c++)f=t[c].elements.length,0!==f&&!1===t[c].br&&(w=document.createElement("br"),
f=t[c].elements[f-1].node,f.parentElement.insertBefore(w,f.nextSibling));b.mra=null}if(b.lp){c=b.lp.toUsedLength(b.w,b.h);for(var y in t)w=t[y].elements[t[y].start_elem],f=t[y].elements[t[y].end_elem],p=Math.ceil(c)+"px",B="-"+Math.ceil(c)+"px",0!==t[y].elements.length&&("lr"===b.ipd?(w.node.style.borderLeftColor=w.bgcolor||"#00000000",w.node.style.borderLeftStyle="solid",w.node.style.borderLeftWidth=p,w.node.style.marginLeft=B):"rl"===b.ipd?(w.node.style.borderRightColor=w.bgcolor||"#00000000",w.node.style.borderRightStyle=
"solid",w.node.style.borderRightWidth=p,w.node.style.marginRight=B):"tb"===b.ipd&&(w.node.style.borderTopColor=w.bgcolor||"#00000000",w.node.style.borderTopStyle="solid",w.node.style.borderTopWidth=p,w.node.style.marginTop=B),"lr"===b.ipd?(f.node.style.borderRightColor=f.bgcolor||"#00000000",f.node.style.borderRightStyle="solid",f.node.style.borderRightWidth=p,f.node.style.marginRight=B):"rl"===b.ipd?(f.node.style.borderLeftColor=f.bgcolor||"#00000000",f.node.style.borderLeftStyle="solid",f.node.style.borderLeftWidth=
p,f.node.style.marginLeft=B):"tb"===b.ipd&&(f.node.style.borderBottomColor=f.bgcolor||"#00000000",f.node.style.borderBottomStyle="solid",f.node.style.borderBottomWidth=p,f.node.style.marginBottom=B));b.lp=null}if(b.flg){c=q(v.getBoundingClientRect(),b);y=c.before;c=c.after;w=Math.sign(c-y);for(f=0;f<=t.length;f++){p=0===f?y:f===t.length?c:(t[f].before+t[f-1].after)/2;if(0<f)for(var C=0;C<t[f-1].elements.length;C++)if(null!==t[f-1].elements[C].bgcolor){var E=t[f-1].elements[C];0>w*(E.after-p)&&(B=
Math.ceil(Math.abs(p-E.after))+"px",E.node.style.backgroundColor=E.bgcolor,"lr"===b.bpd?E.node.style.paddingRight=B:"rl"===b.bpd?E.node.style.paddingLeft=B:"tb"===b.bpd&&(E.node.style.paddingBottom=B))}if(f<t.length)for(C=0;C<t[f].elements.length;C++)E=t[f].elements[C],null!==E.bgcolor&&0<w*(E.before-p)&&(B=Math.ceil(Math.abs(E.before-p))+"px",E.node.style.backgroundColor=E.bgcolor,"lr"===b.bpd?E.node.style.paddingLeft=B:"rl"===b.bpd?E.node.style.paddingRight=B:"tb"===b.bpd&&(E.node.style.paddingTop=
B))}b.flg=null}}"region"===g.kind&&(a(b,v,t),"tb"===b.bpd&&b.enableRollUp&&0<g.contents.length&&"after"===g.styleAttrs[m.byName.displayAlign.qname]&&(g=new n(""===g.id?"_":g.id,t),b.currentISDState[g.id]=g,b.previousISDState&&g.id in b.previousISDState&&0<b.previousISDState[g.id].plist.length&&1<g.plist.length&&g.plist[g.plist.length-2].text===b.previousISDState[g.id].plist[b.previousISDState[g.id].plist.length-1].text&&(b=d.firstElementChild,g=g.plist[g.plist.length-1].after-g.plist[g.plist.length-
1].before,b.style.bottom="-"+g+"px",b.style.transition="transform 0.4s",b.style.position="relative",b.style.transform="translateY(-"+g+"px)")))}else if(b=b.errorHandler,g="Error processing ISD element kind: "+g.kind,b&&b.error&&b.error(g))throw g;}function n(a,b){this.id=a;this.plist=b}function q(a,b){var d={before:null,after:null,start:null,end:null};"tb"===b.bpd?(d.before=a.top,d.after=a.bottom,"lr"===b.ipd?(d.start=a.left,d.end=a.right):(d.start=a.right,d.end=a.left)):"lr"===b.bpd?(d.before=a.left,
d.after=a.right,d.start=a.top,d.end=a.bottom):"rl"===b.bpd&&(d.before=a.right,d.after=a.left,d.start=a.top,d.end=a.bottom);return d}function a(b,c,g,l){if("rt"!==c.localName&&"rtc"!==c.localName)if(l=c.style.backgroundColor||l,0===c.childElementCount)if("span"===c.localName||"rb"===c.localName){var d=c.getBoundingClientRect();if(0!==d.height&&0!==d.width){b=q(d,b);if(!(d=0===g.length)){d=b.before;var f=b.after,m=g[g.length-1].before,k=g[g.length-1].after;d=!(f<k&&d>m||k<=f&&m>=d)}d?g.push({before:b.before,
after:b.after,start:b.start,end:b.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1}):(d=Math.sign(b.after-b.before),f=Math.sign(b.end-b.start),0>d*(b.before-g[g.length-1].before)&&(g[g.length-1].before=b.before),0<d*(b.after-g[g.length-1].after)&&(g[g.length-1].after=b.after),0>f*(b.start-g[g.length-1].start)&&(g[g.length-1].start=b.start,g[g.length-1].start_elem=g[g.length-1].elements.length),0<f*(b.end-g[g.length-1].end)&&(g[g.length-1].end=b.end,g[g.length-1].end_elem=g[g.length-
1].elements.length));g[g.length-1].text+=c.textContent;g[g.length-1].elements.push({node:c,bgcolor:l,before:b.before,after:b.after})}}else"br"===c.localName&&0!==g.length&&(g[g.length-1].br=!0);else for(c=c.firstChild;c;)c.nodeType===Node.ELEMENT_NODE&&(a(b,c,g,l),"ruby"===c.localName||"rtc"===c.localName?0<g.length&&g[g.length-1].rbc.push(c):"span"===c.localName&&c.style[H]&&"none"!==c.style[H]&&0<g.length&&g[g.length-1].te.push(c)),c=c.nextSibling}function l(a,b,c,l){"none"!==l.style&&(b.style[H]=
"auto"===l.style?"filled":l.style+" "+l.symbol,"before"===l.position||"after"===l.position)&&(b.style[A]="tb"===a.bpd?"before"===l.position?"left over":"left under":"rl"===a.bpd?"before"===l.position?"right under":"left under":"before"===l.position?"left under":"right under")}function v(a,b){this.qname=a;this.map=b}c.render=function(a,b,c,l,m,v,p,n,z){l=l||b.clientHeight;m=m||b.clientWidth;if(null!==a.aspectRatio){var d=l*a.aspectRatio;d>m?l=Math.round(m/a.aspectRatio):m=d}d=document.createElement("div");
d.style.position="relative";d.style.width=m+"px";d.style.height=l+"px";d.style.margin="auto";d.style.top=0;d.style.bottom=0;d.style.left=0;d.style.right=0;d.style.zIndex=0;c={h:l,w:m,regionH:null,regionW:null,imgResolver:c,displayForcedOnlyMode:v||!1,isd:a,errorHandler:p,previousISDState:n,enableRollUp:z||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null};b.appendChild(d);for(var f in a.contents)k(c,d,a.contents[f],a);return c.currentISDState};
var z=[new v("http://www.w3.org/ns/ttml#styling backgroundColor",function(a,b,c,l){0!==l[3]&&(b.style.backgroundColor="rgba("+l[0].toString()+","+l[1].toString()+","+l[2].toString()+","+(l[3]/255).toString()+")")}),new v("http://www.w3.org/ns/ttml#styling color",function(a,b,c,l){b.style.color="rgba("+l[0].toString()+","+l[1].toString()+","+l[2].toString()+","+(l[3]/255).toString()+")"}),new v("http://www.w3.org/ns/ttml#styling direction",function(a,b,c,l){b.style.direction=l}),new v("http://www.w3.org/ns/ttml#styling display",
function(a,b,c,l){}),new v("http://www.w3.org/ns/ttml#styling displayAlign",function(a,b,c,l){b.style.display="flex";b.style.flexDirection="column";"before"===l?b.style.justifyContent="flex-start":"center"===l?b.style.justifyContent="center":"after"===l&&(b.style.justifyContent="flex-end")}),new v("http://www.w3.org/ns/ttml#styling extent",function(a,b,c,l){a.regionH=l.h.toUsedLength(a.w,a.h);a.regionW=l.w.toUsedLength(a.w,a.h);var d=l=0;if(c=c.styleAttrs["http://www.w3.org/ns/ttml#styling padding"])l=
c[0].toUsedLength(a.w,a.h)+c[2].toUsedLength(a.w,a.h),d=c[1].toUsedLength(a.w,a.h)+c[3].toUsedLength(a.w,a.h);b.style.height=a.regionH-l+"px";b.style.width=a.regionW-d+"px"}),new v("http://www.w3.org/ns/ttml#styling fontFamily",function(a,b,c,l){a=[];for(var d in l)"monospaceSerif"===l[d]?(a.push("Courier New"),a.push('"Liberation Mono"'),a.push("Courier"),a.push("monospace")):"proportionalSansSerif"===l[d]?(a.push("Arial"),a.push("Helvetica"),a.push('"Liberation Sans"'),a.push("sans-serif")):"monospace"===
l[d]?a.push("monospace"):"sansSerif"===l[d]?a.push("sans-serif"):"serif"===l[d]?a.push("serif"):"monospaceSansSerif"===l[d]?(a.push("Consolas"),a.push("monospace")):"proportionalSerif"===l[d]?a.push("serif"):a.push(l[d]);b.style.fontFamily=a.join(",")}),new v("http://www.w3.org/ns/ttml#styling shear",function(a,b,c,l){0!==l&&(c=-.9*l,b.style.transform="tb"===a.bpd?"skewX("+c+"deg)":"skewY("+c+"deg)")}),new v("http://www.w3.org/ns/ttml#styling fontSize",function(a,b,c,l){b.style.fontSize=l.toUsedLength(a.w,
a.h)+"px"}),new v("http://www.w3.org/ns/ttml#styling fontStyle",function(a,b,c,l){b.style.fontStyle=l}),new v("http://www.w3.org/ns/ttml#styling fontWeight",function(a,b,c,l){b.style.fontWeight=l}),new v("http://www.w3.org/ns/ttml#styling lineHeight",function(a,b,c,l){b.style.lineHeight="normal"===l?"normal":l.toUsedLength(a.w,a.h)+"px"}),new v("http://www.w3.org/ns/ttml#styling opacity",function(a,b,c,l){b.style.opacity=l}),new v("http://www.w3.org/ns/ttml#styling origin",function(a,b,c,l){b.style.top=
l.h.toUsedLength(a.w,a.h)+"px";b.style.left=l.w.toUsedLength(a.w,a.h)+"px"}),new v("http://www.w3.org/ns/ttml#styling overflow",function(a,b,c,l){b.style.overflow=l}),new v("http://www.w3.org/ns/ttml#styling padding",function(a,b,c,l){c=[];c[0]=l[0].toUsedLength(a.w,a.h)+"px";c[1]=l[3].toUsedLength(a.w,a.h)+"px";c[2]=l[2].toUsedLength(a.w,a.h)+"px";c[3]=l[1].toUsedLength(a.w,a.h)+"px";b.style.padding=c.join(" ")}),new v("http://www.w3.org/ns/ttml#styling position",function(a,b,c,l){b.style.top=l.h.toUsedLength(a.w,
a.h)+"px";b.style.left=l.w.toUsedLength(a.w,a.h)+"px"}),new v("http://www.w3.org/ns/ttml#styling rubyAlign",function(a,b,c,l){b.style.rubyAlign="spaceAround"===l?"space-around":"center"}),new v("http://www.w3.org/ns/ttml#styling rubyPosition",function(a,b,c,l){if("before"===l||"after"===l)b.parentElement.style[D]=u?l:"tb"===a.bpd?"before"===l?"over":"under":"rl"===a.bpd?"before"===l?"over":"under":"before"===l?"under":"over"}),new v("http://www.w3.org/ns/ttml#styling showBackground",null),new v("http://www.w3.org/ns/ttml#styling textAlign",
function(a,b,c,l){b.style.textAlign="start"===l?"rl"===a.ipd?"right":"left":"end"===l?"rl"===a.ipd?"left":"right":l}),new v("http://www.w3.org/ns/ttml#styling textDecoration",function(a,b,c,l){b.style.textDecoration=l.join(" ").replace("lineThrough","line-through")}),new v("http://www.w3.org/ns/ttml#styling textOutline",function(a,b,c,l){}),new v("http://www.w3.org/ns/ttml#styling textShadow",function(a,b,c,l){var d=c.styleAttrs[m.byName.textOutline.qname];if("none"===l&&"none"===d)b.style.textShadow=
"";else{c=[];"none"!==d&&(d="rgba("+d.color[0].toString()+","+d.color[1].toString()+","+d.color[2].toString()+","+(d.color[3]/255).toString()+")",c.push("1px 1px 1px "+d),c.push("-1px 1px 1px "+d),c.push("1px -1px 1px "+d),c.push("-1px -1px 1px "+d));if("none"!==l)for(var f in l)c.push(l[f].x_off.toUsedLength(a.w,a.h)+"px "+l[f].y_off.toUsedLength(a.w,a.h)+"px "+l[f].b_radius.toUsedLength(a.w,a.h)+"px rgba("+l[f].color[0].toString()+","+l[f].color[1].toString()+","+l[f].color[2].toString()+","+(l[f].color[3]/
255).toString()+")");b.style.textShadow=c.join(",")}}),new v("http://www.w3.org/ns/ttml#styling textCombine",function(a,b,c,l){b.style.textCombineUpright=l}),new v("http://www.w3.org/ns/ttml#styling textEmphasis",function(a,b,c,l){}),new v("http://www.w3.org/ns/ttml#styling unicodeBidi",function(a,b,c,l){b.style.unicodeBidi="bidiOverride"===l?"bidi-override":l}),new v("http://www.w3.org/ns/ttml#styling visibility",function(a,b,c,l){b.style.visibility=l}),new v("http://www.w3.org/ns/ttml#styling wrapOption",
function(a,b,c,l){b.style.whiteSpace="wrap"===l?"preserve"===c.space?"pre-wrap":"normal":"preserve"===c.space?"pre":"noWrap"}),new v("http://www.w3.org/ns/ttml#styling writingMode",function(a,b,c,l){if("lrtb"===l||"lr"===l)b.style.writingMode="horizontal-tb";else if("rltb"===l||"rl"===l)b.style.writingMode="horizontal-tb";else if("tblr"===l)b.style.writingMode="vertical-lr";else if("tbrl"===l||"tb"===l)b.style.writingMode="vertical-rl"}),new v("http://www.w3.org/ns/ttml#styling zIndex",function(a,
b,c,l){b.style.zIndex=l}),new v("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(a,b,c,l){a.displayForcedOnlyMode&&!1===l&&(b.style.visibility="hidden")})],B;for(B in z);var u="webkitRubyPosition"in window.getComputedStyle(document.documentElement),D=u?"webkitRubyPosition":"rubyPosition",H="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",A="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?
"webkitTextEmphasisPosition":"textEmphasisPosition"})("undefined"===typeof n?this.imscHTML={}:n,"undefined"===typeof imscNames?c("./names"):imscNames,"undefined"===typeof imscStyles?c("./styles"):imscStyles,"undefined"===typeof imscUtils?c("./utils"):imscUtils)},{"./names":35,"./styles":36,"./utils":37}],33:[function(c,q,n){(function(c,b,m,p){function k(b,c,v,t,d,f,g,w,B){if(c<g.begin||c>=g.end)return null;f="regionID"in g&&""!==g.regionID?g.regionID:f;if(null!==d&&f!==v.id&&(!("contents"in g)||"contents"in
g&&0===g.contents.length||""!==f))return null;var u=new z(g);for(A in g.sets)c<g.sets[A].begin||c>=g.sets[A].end||(u.styleAttrs[g.sets[A].qname]=g.sets[A].value);var A={};for(var y in u.styleAttrs)if(A[y]=!0,"region"===u.kind&&y===m.byName.writingMode.qname&&!(m.byName.direction.qname in u.styleAttrs)){var D=u.styleAttrs[y];if("lrtb"===D||"lr"===D)u.styleAttrs[m.byName.direction.qname]="ltr";else if("rltb"===D||"rl"===D)u.styleAttrs[m.byName.direction.qname]="rtl"}if(null!==d)for(var G in m.all)if(y=
m.all[G],y.qname===m.byName.textDecoration.qname){D=d.styleAttrs[y.qname];var H=u.styleAttrs[y.qname],C=[];void 0===H?C=D:-1===H.indexOf("none")?((-1===H.indexOf("noUnderline")&&-1!==D.indexOf("underline")||-1!==H.indexOf("underline"))&&C.push("underline"),(-1===H.indexOf("noLineThrough")&&-1!==D.indexOf("lineThrough")||-1!==H.indexOf("lineThrough"))&&C.push("lineThrough"),(-1===H.indexOf("noOverline")&&-1!==D.indexOf("overline")||-1!==H.indexOf("overline"))&&C.push("overline")):C.push("none");u.styleAttrs[y.qname]=
C}else y.qname!==m.byName.fontSize.qname||y.qname in u.styleAttrs||"span"!==u.kind||"textContainer"!==u.styleAttrs[m.byName.ruby.qname]?y.qname!==m.byName.fontSize.qname||y.qname in u.styleAttrs||"span"!==u.kind||"text"!==u.styleAttrs[m.byName.ruby.qname]?y.inherit&&y.qname in d.styleAttrs&&!(y.qname in u.styleAttrs)&&(u.styleAttrs[y.qname]=d.styleAttrs[y.qname]):(D=d.styleAttrs[m.byName.fontSize.qname],u.styleAttrs[y.qname]="textContainer"===d.styleAttrs[m.byName.ruby.qname]?D:new p.ComputedLength(.5*
D.rw,.5*D.rh)):(D=d.styleAttrs[m.byName.fontSize.qname],u.styleAttrs[y.qname]=new p.ComputedLength(.5*D.rw,.5*D.rh));for(var E in m.all)if(G=m.all[E],!(G.qname in u.styleAttrs||G.qname===m.byName.position.qname&&m.byName.origin.qname in u.styleAttrs||G.qname===m.byName.origin.qname&&m.byName.position.qname in u.styleAttrs)&&(y=b.head.styling.initials[G.qname]||G.initial,null!==y&&("region"===u.kind||!1===G.inherit&&null!==y)))if(y=G.parse(y),null!==y)u.styleAttrs[G.qname]=y,A[G.qname]=!0;else if(G=
"Invalid initial value for '"+G.qname+"' on element '"+u.kind,w&&w.error&&w.error(G))throw G;for(var K in m.all)if(E=m.all[K],E.qname in A&&null!==E.compute)if(G=E.compute(b,d,u,u.styleAttrs[E.qname],B),null!==G)u.styleAttrs[E.qname]=G;else if(u.styleAttrs[E.qname]=E.compute(b,d,u,E.parse(E.initial),B),E="Style '"+E.qname+"' on element '"+u.kind+"' cannot be computed",w&&w.error&&w.error(E))throw E;if("none"===u.styleAttrs[m.byName.display.qname])return null;if(null===d)var h=null===t?[]:[t];else"contents"in
g&&(h=g.contents);for(var e in h)d=k(b,c,v,t,u,f,h[e],w,B),null!==d&&u.contents.push(d.element);for(var F in u.styleAttrs)b=!1,"span"===u.kind&&(c=u.styleAttrs[m.byName.ruby.qname],(b=("container"===c||"textContainer"===c||"baseContainer"===c)&&-1!==q.indexOf(F))||(b="container"!==c&&F===m.byName.rubyAlign.qname),b||(b=!("textContainer"===c||"text"===c)&&F===m.byName.rubyPosition.qname)),b||(b=-1===m.byQName[F].applies.indexOf(u.kind)),b&&delete u.styleAttrs[F];F=u.styleAttrs[m.byName.ruby.qname];
if("p"===u.kind||"span"===u.kind&&("textContainer"===F||"text"===F))F=[],a(u,F),n(F),l(u);return"div"===u.kind&&m.byName.backgroundImage.qname in u.styleAttrs||"br"===u.kind||"image"===u.kind||"contents"in u&&0<u.contents.length||"span"===u.kind&&null!==u.text||"region"===u.kind&&"always"===u.styleAttrs[m.byName.showBackground.qname]?{region_id:f,element:u}:null}function n(a){function b(a){return"br"===a.kind||/[\r\n\t ]$/.test(a.text)}function c(a){return"br"===a.kind||"preserve"===a.space&&/^[\r\n]/.test(a.text)}
for(var l,d=0;d<a.length;)if(l=a[d],"br"===l.kind||"preserve"===l.space)d++;else{var f=l.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(f)&&(0===d||b(a[d-1]))&&(f=f.substring(1));l.text=f;0===f.length?a.splice(d,1):d++}for(d=0;d<a.length;d++)l=a[d],"br"===l.kind||"preserve"===l.space?d++:/[ ]$/.test(l.text)&&(d===a.length-1||c(a[d+1]))&&(l.text=l.text.slice(0,-1))}function a(b,c){for(var l in b.contents){var k=b.contents[l],d=k.styleAttrs[m.byName.ruby.qname];if("span"!==k.kind||"textContainer"!==d&&
"text"!==d)"contents"in k?a(k,c):("span"===k.kind&&0!==k.text.length||"br"===k.kind)&&c.push(k)}}function l(a){if("br"===a.kind)return!1;if("text"in a)return 0===a.text.length;if("contents"in a){for(var b=a.contents.length;b--;)l(a.contents[b])&&a.contents.splice(b,1);return 0===a.contents.length}}function v(a){this.contents=[];this.aspectRatio=a.aspectRatio;this.lang=a.lang}function z(a){this.kind=a.kind||"region";this.lang=a.lang;a.id&&(this.id=a.id);this.styleAttrs={};for(var b in a.styleAttrs)this.styleAttrs[b]=
a.styleAttrs[b];"src"in a&&(this.src=a.src);"type"in a&&(this.type=a.type);if("text"in a)this.text=a.text;else if("region"===this.kind||"contents"in a)this.contents=[];"space"in a&&(this.space=a.space)}c.generateISD=function(a,b,c){var l=new v(a),d={},f;for(f in a.head.layout.regions){var g=k(a,b,a.head.layout.regions[f],a.body,null,"",a.head.layout.regions[f],c,d);null!==g&&l.contents.push(g.element)}return l};var q=[m.byName.color.qname,m.byName.textCombine.qname,m.byName.textDecoration.qname,m.byName.textEmphasis.qname,
m.byName.textOutline.qname,m.byName.textShadow.qname]})("undefined"===typeof n?this.imscISD={}:n,"undefined"===typeof imscNames?c("./names"):imscNames,"undefined"===typeof imscStyles?c("./styles"):imscStyles,"undefined"===typeof imscUtils?c("./utils"):imscUtils)},{"./names":35,"./styles":36,"./utils":37}],34:[function(c,q,n){n.generateISD=c("./isd").generateISD;n.fromXML=c("./doc").fromXML;n.renderHTML=c("./html").render},{"./doc":31,"./html":32,"./isd":33}],35:[function(c,q,n){c="undefined"===typeof n?
this.imscNames={}:n;c.ns_tt="http://www.w3.org/ns/ttml";c.ns_tts="http://www.w3.org/ns/ttml#styling";c.ns_ttp="http://www.w3.org/ns/ttml#parameter";c.ns_xml="http://www.w3.org/XML/1998/namespace";c.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling";c.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter";c.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt";c.ns_ebutts="urn:ebu:tt:style"},{}],36:[function(c,q,n){(function(c,b,m){function k(a,b,c,k,m,n,p,q){this.name=b;this.ns=
a;this.qname=a+" "+b;this.inherit=m;this.animatable=n;this.initial=c;this.applies=k;this.parse=p;this.compute=q}c.all=[new k(b.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,m.parseColor,null),new k(b.ns_tts,"color","white",["span"],!0,!0,m.parseColor,null),new k(b.ns_tts,"direction","ltr",["p","span"],!0,!0,function(a){return a},null),new k(b.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(a){return a},null),new k(b.ns_tts,"displayAlign",
"before",["region"],!1,!0,function(a){return a},null),new k(b.ns_tts,"extent","auto",["tt","region"],!1,!0,function(a){if("auto"===a)return a;var b=a.split(" ");if(2!==b.length)return null;a=m.parseLength(b[0]);return(b=m.parseLength(b[1]))&&a?{h:b,w:a}:null},function(a,b,c,k,n){if("auto"===k)b=new m.ComputedLength(0,1);else if(b=m.toComputedLength(k.h.value,k.h.unit,null,a.dimensions.h,null,a.pxLength.h),null===b)return null;if("auto"===k)a=new m.ComputedLength(1,0);else if(a=m.toComputedLength(k.w.value,
k.w.unit,null,a.dimensions.w,null,a.pxLength.w),null===a)return null;return{h:b,w:a}}),new k(b.ns_tts,"fontFamily","default",["span","p"],!0,!0,function(a){a=a.split(",");var b=[],c;for(c in a)"'"!==a[c].charAt(0)&&'"'!==a[c].charAt(0)?"default"===a[c]?b.push("monospaceSerif"):b.push(a[c]):b.push(a[c]);return b},null),new k(b.ns_tts,"shear","0%",["p"],!0,!0,m.parseLength,function(a,b,c,k){if("%"===k.unit)a=100<Math.abs(k.value)?100*Math.sign(k.value):k.value;else return null;return a}),new k(b.ns_tts,
"fontSize","1c",["span","p"],!0,!0,m.parseLength,function(a,b,k,n,p){return m.toComputedLength(n.value,n.unit,null!==b?b.styleAttrs[c.byName.fontSize.qname]:a.cellLength.h,null!==b?b.styleAttrs[c.byName.fontSize.qname]:a.cellLength.h,a.cellLength.h,a.pxLength.h)}),new k(b.ns_tts,"fontStyle","normal",["span","p"],!0,!0,function(a){return a},null),new k(b.ns_tts,"fontWeight","normal",["span","p"],!0,!0,function(a){return a},null),new k(b.ns_tts,"lineHeight","normal",["p"],!0,!0,function(a){return"normal"===
a?a:m.parseLength(a)},function(a,b,k,n,p){if("normal"===n)a=n;else if(a=m.toComputedLength(n.value,n.unit,k.styleAttrs[c.byName.fontSize.qname],k.styleAttrs[c.byName.fontSize.qname],a.cellLength.h,a.pxLength.h),null===a)return null;return a}),new k(b.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new k(b.ns_tts,"origin","auto",["region"],!1,!0,function(a){if("auto"===a)return a;var b=a.split(" ");if(2!==b.length)return null;a=m.parseLength(b[0]);return(b=m.parseLength(b[1]))&&a?{h:b,w:a}:null},
function(a,b,c,k,n){if("auto"===k)b=new m.ComputedLength(0,0);else if(b=m.toComputedLength(k.h.value,k.h.unit,null,a.dimensions.h,null,a.pxLength.h),null===b)return null;if("auto"===k)a=new m.ComputedLength(0,0);else if(a=m.toComputedLength(k.w.value,k.w.unit,null,a.dimensions.w,null,a.pxLength.w),null===a)return null;return{h:b,w:a}}),new k(b.ns_tts,"overflow","hidden",["region"],!1,!0,function(a){return a},null),new k(b.ns_tts,"padding","0px",["region"],!1,!0,function(a){a=a.split(" ");if(4<a.length)return null;
var b=[],c;for(c in a){var k=m.parseLength(a[c]);if(!k)return null;b.push(k)}return b},function(a,b,k,n,p){if(1===n.length)b=[n[0],n[0],n[0],n[0]];else if(2===n.length)b=[n[0],n[1],n[0],n[1]];else if(3===n.length)b=[n[0],n[1],n[2],n[1]];else if(4===n.length)b=[n[0],n[1],n[2],n[3]];else return null;n=k.styleAttrs[c.byName.writingMode.qname];if("lrtb"===n||"lr"===n)b=[b[0],b[3],b[2],b[1]];else if("rltb"===n||"rl"===n)b=[b[0],b[1],b[2],b[3]];else if("tblr"===n)b=[b[3],b[0],b[1],b[2]];else if("tbrl"===
n||"tb"===n)b=[b[3],b[2],b[1],b[0]];else return null;n=[];for(var l in b)if(0===b[l].value)n[l]=new m.ComputedLength(0,0);else if(n[l]=m.toComputedLength(b[l].value,b[l].unit,k.styleAttrs[c.byName.fontSize.qname],"0"===l||"2"===l?k.styleAttrs[c.byName.extent.qname].h:k.styleAttrs[c.byName.extent.qname].w,"0"===l||"2"===l?a.cellLength.h:a.cellLength.w,"0"===l||"2"===l?a.pxLength.h:a.pxLength.w),null===n[l])return null;return n}),new k(b.ns_tts,"position","top left",["region"],!1,!0,function(a){return m.parsePosition(a)},
function(a,b,k,n){b=m.toComputedLength(n.v.offset.value,n.v.offset.unit,null,new m.ComputedLength(-k.styleAttrs[c.byName.extent.qname].h.rw,a.dimensions.h.rh-k.styleAttrs[c.byName.extent.qname].h.rh),null,a.pxLength.h);if(null===b)return null;"bottom"===n.v.edge&&(b=new m.ComputedLength(-b.rw-k.styleAttrs[c.byName.extent.qname].h.rw,a.dimensions.h.rh-b.rh-k.styleAttrs[c.byName.extent.qname].h.rh));var l=m.toComputedLength(n.h.offset.value,n.h.offset.unit,null,new m.ComputedLength(a.dimensions.w.rw-
k.styleAttrs[c.byName.extent.qname].w.rw,-k.styleAttrs[c.byName.extent.qname].w.rh),null,a.pxLength.w);if(null===b)return null;"right"===n.h.edge&&(l=new m.ComputedLength(a.dimensions.w.rw-l.rw-k.styleAttrs[c.byName.extent.qname].w.rw,-l.rh-k.styleAttrs[c.byName.extent.qname].w.rh));return{h:b,w:l}}),new k(b.ns_tts,"ruby","none",["span"],!1,!0,function(a){return a},null),new k(b.ns_tts,"rubyAlign","center",["span"],!0,!0,function(a){return"center"!==a&&"spaceAround"!==a?null:a},null),new k(b.ns_tts,
"rubyPosition","outside",["span"],!0,!0,function(a){return a},null),new k(b.ns_tts,"rubyReserve","none",["p"],!0,!0,function(a){var b=a.split(" ");a=[null,null];if(0===b.length||2<b.length||"none"!==b[0]&&"both"!==b[0]&&"after"!==b[0]&&"before"!==b[0]&&"outside"!==b[0])return null;a[0]=b[0];if(2===b.length&&"none"!==b[0])if(b=m.parseLength(b[1]))a[1]=b;else return null;return a},function(a,b,k,n,p){if("none"===n[0])return n;a=null===n[1]?new m.ComputedLength(.5*k.styleAttrs[c.byName.fontSize.qname].rw,
.5*k.styleAttrs[c.byName.fontSize.qname].rh):m.toComputedLength(n[1].value,n[1].unit,k.styleAttrs[c.byName.fontSize.qname],k.styleAttrs[c.byName.fontSize.qname],a.cellLength.h,a.pxLength.h);return null===a?null:[n[0],a]}),new k(b.ns_tts,"showBackground","always",["region"],!1,!0,function(a){return a},null),new k(b.ns_tts,"textAlign","start",["p"],!0,!0,function(a){return a},function(a,b,c,k,m){return"left"===k?"start":"right"===k?"end":k}),new k(b.ns_tts,"textCombine","none",["span"],!0,!0,function(a){return"none"===
a||"all"===a?a:null},null),new k(b.ns_tts,"textDecoration","none",["span"],!0,!0,function(a){return a.split(" ")},null),new k(b.ns_tts,"textEmphasis","none",["span"],!0,!0,function(a){a=a.split(" ");var b={style:null,symbol:null,color:null,position:null},c;for(c in a)if("none"===a[c]||"auto"===a[c])b.style=a[c];else if("filled"===a[c]||"open"===a[c])b.style=a[c];else if("circle"===a[c]||"dot"===a[c]||"sesame"===a[c])b.symbol=a[c];else if("current"===a[c])b.color=a[c];else if("outside"===a[c]||"before"===
a[c]||"after"===a[c])b.position=a[c];else if(b.color=m.parseColor(a[c]),null===b.color)return null;null==b.style&&null==b.symbol?b.style="auto":(b.symbol=b.symbol||"circle",b.style=b.style||"filled");b.position=b.position||"outside";b.color=b.color||"current";return b},null),new k(b.ns_tts,"textOutline","none",["span"],!0,!0,function(a){if("none"===a)return a;var b={};a=a.split(" ");if(0===a.length||2<a.length)return null;var c=m.parseColor(a[0]);b.color=c;null!==c&&a.shift();if(1!==a.length)return null;
a=m.parseLength(a[0]);if(!a)return null;b.thickness=a;return b},function(a,b,k,n,p){if("none"===n)return n;b={};b.color=null===n.color?k.styleAttrs[c.byName.color.qname]:n.color;b.thickness=m.toComputedLength(n.thickness.value,n.thickness.unit,k.styleAttrs[c.byName.fontSize.qname],k.styleAttrs[c.byName.fontSize.qname],a.cellLength.h,a.pxLength.h);return null===b.thickness?null:b}),new k(b.ns_tts,"textShadow","none",["span"],!0,!0,m.parseTextShadow,function(a,b,k,n){if("none"===n)return n;b=[];for(var l in n){var p=
{};p.x_off=m.toComputedLength(n[l][0].value,n[l][0].unit,null,k.styleAttrs[c.byName.fontSize.qname],null,a.pxLength.w);if(null===p.x_off)return null;p.y_off=m.toComputedLength(n[l][1].value,n[l][1].unit,null,k.styleAttrs[c.byName.fontSize.qname],null,a.pxLength.h);if(null===p.y_off)return null;if(null===n[l][2])p.b_radius=0;else if(p.b_radius=m.toComputedLength(n[l][2].value,n[l][2].unit,null,k.styleAttrs[c.byName.fontSize.qname],null,a.pxLength.h),null===p.b_radius)return null;p.color=null===n[l][3]?
k.styleAttrs[c.byName.color.qname]:n[l][3];b.push(p)}return b}),new k(b.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(a){return a},null),new k(b.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(a){return a},null),new k(b.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(a){return a},null),new k(b.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(a){return a},null),new k(b.ns_tts,"zIndex","auto",["region"],!1,!0,function(a){"auto"!==a&&(a=parseInt(a),
isNaN(a)&&(a=null));return a},null),new k(b.ns_ebutts,"linePadding","0c",["p"],!0,!1,m.parseLength,function(a,b,c,k,n){return m.toComputedLength(k.value,k.unit,null,null,a.cellLength.w,null)}),new k(b.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(a){return a},null),new k(b.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(a){return a},null),new k(b.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(a){return"true"===a?!0:!1},null),new k(b.ns_itts,"fillLineGap",
"false",["p"],!0,!0,function(a){return"true"===a?!0:!1},null)];c.byQName={};for(var n in c.all)c.byQName[c.all[n].qname]=c.all[n];c.byName={};for(var q in c.all)c.byName[c.all[q].name]=c.all[q]})("undefined"===typeof n?this.imscStyles={}:n,"undefined"===typeof imscNames?c("./names"):imscNames,"undefined"===typeof imscUtils?c("./utils"):imscUtils)},{"./names":35,"./utils":37}],37:[function(c,q,n){(function(c){var b=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,k=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,
n=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,q={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};c.parseColor=function(a){var c,m=
null,p=q[a.toLowerCase()];void 0!==p?m=p:null!==(c=b.exec(a))?m=[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16),void 0!==c[4]?parseInt(c[4],16):255]:null!==(c=k.exec(a))?m=[parseInt(c[1]),parseInt(c[2]),parseInt(c[3]),255]:null!==(c=n.exec(a))&&(m=[parseInt(c[1]),parseInt(c[2]),parseInt(c[3]),parseInt(c[4])]);return m};var t=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;c.parseLength=function(a){var b,c=null;null!==(b=t.exec(a))&&(c={value:parseFloat(b[1]),unit:b[2]});return c};c.parseTextShadow=
function(a){a=a.split(",");var b=[],k;for(k in a){var m=a[k].split(" ");if(1===m.length&&"none"===m[0])return"none";if(1<m.length&&5>m.length){var n=[null,null,null,null],p=c.parseLength(m.shift());if(null===p)return null;n[0]=p;p=c.parseLength(m.shift());if(null===p)return null;n[1]=p;if(0!==m.length&&(p=c.parseLength(m[0]),null!==p&&(n[2]=p,m.shift()),0!==m.length)){m=c.parseColor(m[0]);if(null===m)return null;n[3]=m}b.push(n)}}return b};c.parsePosition=function(a){a=a.split(" ");var b=function(a){return"center"===
a||"left"===a||"top"===a||"bottom"===a||"right"===a};if(4<a.length)return null;for(var k in a)if(!b(a[k])){var m=c.parseLength(a[k]);if(null===m)return null;a[k]=m}k={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}};for(m=0;m<a.length;){var n=a[m++];if(b(n)){var p={value:0,unit:"%"};2!==a.length&&m<a.length&&!b(a[m])&&(p=a[m++]);"right"===n?(k.h.edge=n,k.h.offset=p):"bottom"===n?(k.v.edge=n,k.v.offset=p):"left"===n?k.h.offset=p:"top"===n&&(k.v.offset=p)}else if(1===
a.length||2===a.length)1===m?k.h.offset=n:k.v.offset=n;else return null}return k};c.ComputedLength=function(a,b){this.rw=a;this.rh=b};c.ComputedLength.prototype.toUsedLength=function(a,b){return a*this.rw+b*this.rh};c.ComputedLength.prototype.isZero=function(){return 0===this.rw&&0===this.rh};c.toComputedLength=function(a,b,k,m,n,p){return"%"===b&&m?new c.ComputedLength(m.rw*a/100,m.rh*a/100):"em"===b&&k?new c.ComputedLength(k.rw*a,k.rh*a):"c"===b&&n?new c.ComputedLength(a*n.rw,a*n.rh):"px"===b&&
p?new c.ComputedLength(a*p.rw,a*p.rh):"rh"===b?new c.ComputedLength(0,a/100):"rw"===b?new c.ComputedLength(a/100,0):null}})("undefined"===typeof n?this.imscUtils={}:n)},{}]},{},[34])(34)});
